(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17153550"],{"79bd":function(e,t,a){"use strict";a("f4f9")},e784:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{attrs:{id:"ExistDiagramView"}},[!e.ready||null!=e.type&&"BPMN"!=e.type?e._e():a("the-diagram",{key:e.counter,attrs:{apiKey:e.apiKey,diagramId:e.diagramIdToDiagram,customHeight:e.customHeight,showViewer:e.showViewer||e.showViewerLocal,commentsElement:e.commentsElement,diagramBody:e.diagramBody}}),e.apiKey&&e.ready&&"DRAW"==e.type?a("the-draw",{key:e.counter,attrs:{apiKey:e.apiKey,diagramId:e.diagramIdToDiagram,showViewer:e.showViewer||e.showViewerLocal,commentsElement:e.commentsElement,diagramBody:e.diagramBody}}):e._e(),e.showSiderBar?a("b-sidebar",{attrs:{id:"sidebar-1",right:"",shadow:""},model:{value:e.showSiderBar,callback:function(t){e.showSiderBar=t},expression:"showSiderBar"}},[null==e.version?a("all-comments",{attrs:{elementid:null!=e.getCommentElement?e.getCommentElement.currentOverlayId:null,diagramid:e.diagramid}}):e._e()],1):e._e()],1)])},i=[],r=(a("d3b7"),a("3ca3"),a("ddb0"),a("b0c0"),a("a4d3"),a("e01a"),a("c21c")),o={name:"ExistDiagram",props:["diagramid","showViewer","customHeight","apiKey"],components:{TheDiagram:function(){return Promise.all([a.e("chunk-a0ea07a4"),a.e("chunk-660a9b76"),a.e("chunk-3ed7be0d"),a.e("chunk-9948d1c0"),a.e("chunk-6e039ddd"),a.e("chunk-7048fd2d"),a.e("chunk-2d2170f6"),a.e("chunk-3ec878de"),a.e("chunk-246d9322"),a.e("chunk-476b964c"),a.e("chunk-55b42482"),a.e("chunk-9cf0ba8c"),a.e("chunk-a3b492a8"),a.e("chunk-0859692b"),a.e("chunk-2d141c42"),a.e("chunk-66036f60"),a.e("chunk-b73a656a"),a.e("chunk-dd6cb0e2"),a.e("chunk-1e0b299c"),a.e("chunk-24d1a558"),a.e("chunk-697cd78c"),a.e("chunk-12e9bd8e"),a.e("chunk-00bd2c3d"),a.e("chunk-414062a2"),a.e("chunk-2d0e8e4c"),a.e("chunk-5fec6954"),a.e("chunk-5da33c8b"),a.e("chunk-5b10143f"),a.e("chunk-2d0d7088"),a.e("chunk-8d9ac4b8"),a.e("chunk-5155ffe5")]).then(a.bind(null,"f329"))},TheDraw:function(){return a.e("chunk-74d365f2").then(a.bind(null,"bd79"))},AllComments:function(){return Promise.all([a.e("chunk-12e9bd8e"),a.e("chunk-72577dff"),a.e("chunk-17b21645")]).then(a.bind(null,"af00"))}},data:function(){return{diagramBody:null,counter:0,count:0,showSiderBar:!1,unreadCount:0,type:null,myPermision:null,showViewerLocal:!1,ready:!1,version:null,commentsElement:null,settings:{maxScrollbarLength:60}}},computed:{diagramIdToDiagram:function(){return null!=this.apiKey&&null!=this.diagramid?this.diagramid:null},isAuthenticated:function(){return this.$store.getters.isAuthenticated},getCommentElement:function(){return this.$store.getters.getCommentedElement},openComment:function(){return this.$store.getters.getOpenComment}},watch:{openComment:function(){this.showSiderBar=this.openComment},getCommentElement:{handler:function(e){this.showSiderBar=!1},deep:!0}},created:function(){this.loadDiagram()},mounted:function(){var e=this;setTimeout((function(){"true"==e.$route.query.embedded&&(e.showViewer=!0,e.customHeight="800"),e.loadCommentsElements()}),300)},methods:{checkComments:function(){return"EDIT"==this.myPermision||"COMMENT"==this.myPermision},loadDiagramNotVerion:function(){var e=this,t="";null!=this.apiKey&&(t="?apiKey="+this.apiKey),r["a"].get("/diagram/"+this.diagramid+t).then((function(t){e.type=t.data.diagram.type,"DRAW"==t.data.diagram.type&&null==e.apiKey&&e.$router.push("/app/draw/"+e.diagramid),"PLANT"==t.data.diagram.type&&null==e.apiKey&&e.$router.push("/app/plant/"+e.diagramid),"ORGCHART"==t.data.diagram.type&&null==e.apiKey&&e.$router.push("/app/orgchart/"+e.diagramid),e.myPermision=t.data.permission,e.$store.commit("setMyPermission",t.data.permission),"EDIT"!=e.myPermision&&(e.showViewerLocal=!0),e.diagramBody=t.data.diagram.body,e.ready=!0,e.counter=e.counter+1,1!=e.showViewer&&e.$store.commit("setDiagram",t.data.diagram),e.$emit("diagrambodyready",e.diagramBody)})).catch((function(){e.errorInfo(e.$t("no-permission"),""),setTimeout((function(){var t="/app/noaccess/"+e.diagramid;e.$route.query.emailLink&&(t=t+"?emailLink="+e.$route.query.emailLink),e.$router.push(t)}),300)}))},loadDiagram:function(){null!=this.$route.query&null!=this.$route.query.restoreVersion?(this.version=this.$route.query.restoreVersion,this.loadDiagramFromVersion()):this.loadDiagramNotVerion()},loadDiagramFromVersion:function(){var e=this;r["a"].get("/diagram/"+this.diagramid+"/version/"+this.version).then((function(t){e.diagramBody=t.data.body,e.ready=!0,e.counter=e.counter+1;var a={id:e.diagramid,name:t.data.name,description:t.data.description,body:t.data.body};e.$store.commit("setDiagram",a)})).catch((function(){e.infoError(e.$t("no-permission"),"")}))},loadCommentsElements:function(){var e=this;this.isAuthenticated&&this.checkComments()&&r["a"].get("/comment/"+this.diagramid).then((function(t){e.commentsElement=t.data,e.counter=e.counter+1}))}}},d=o,m=(a("79bd"),a("2877")),u=Object(m["a"])(d,n,i,!1,null,"01bbafe0",null);t["default"]=u.exports},f4f9:function(e,t,a){}}]);
//# sourceMappingURL=chunk-17153550.5ac9e572.js.map