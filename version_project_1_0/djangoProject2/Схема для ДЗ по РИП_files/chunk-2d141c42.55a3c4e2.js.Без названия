(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d141c42"],{"0062":function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),l=n("a242"),c=n("5595"),u=n("b85c"),s=(n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),n("02d4")),d=n("4fdd"),m=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,[{key:"refresh",value:function(){var e=this.editor.model,t=e.schema,n=e.document.selection,i=h(n);this.isEnabled=g(n,t,e),this.value=i?i.getAttribute("value")||"":null}},{key:"execute",value:function(e){var t=this,n=this.editor.model,i=n.document.selection;n.change((function(a){var r;null!==t.value?r=h(i):(r=a.createElement("rawHtml"),n.insertContent(r),a.setSelection(r,"on")),a.setAttribute("value",e,r)}))}}]),n}(l["a"]);function g(e,t,n){var i=f(e,n);return t.checkChild(i,"rawHtml")}function f(e,t){var n=Object(c["d"])(e,t),i=n.start.parent;return i.isEmpty&&!i.is("element","$root")?i.parent:i}function h(e){var t=e.getSelectedElement();return t&&t.is("element","rawHtml")?t:null}n("34ce");
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */var v=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,e),e.config.define("htmlEmbed",{showPreviews:!1,sanitizeHtml:function(e){return Object(d["p"])("html-embed-provide-sanitize-function"),{html:e,hasChanged:!1}}}),a._widgetButtonViewReferences=new Set,a}return Object(a["a"])(n,[{key:"init",value:function(){var e=this.editor,t=e.model.schema;t.register("rawHtml",{isObject:!0,allowWhere:"$block",allowAttributes:["value"]}),e.commands.add("htmlEmbed",new m(e)),this._setupConversion()}},{key:"_setupConversion",value:function(){var e=this.editor,t=e.t,n=e.editing.view,i=this._widgetButtonViewReferences,a=e.config.get("htmlEmbed");function r(e){var t=e.domElement,n=e.editor,i=e.state,a=e.props;t.textContent="";var r,c=t.ownerDocument;if(i.isEditable){var u={isDisabled:!1,placeholder:a.textareaPlaceholder};r=l({domDocument:c,state:i,props:u}),t.append(r)}else if(i.showPreviews){var d={sanitizeHtml:a.sanitizeHtml};t.append(s({domDocument:c,state:i,props:d,editor:n}))}else{var m={isDisabled:!0,placeholder:a.textareaPlaceholder};t.append(l({domDocument:c,state:i,props:m}))}var g={onEditClick:a.onEditClick,onSaveClick:function(){a.onSaveClick(r.value)},onCancelClick:a.onCancelClick};t.prepend(o({editor:n,domDocument:c,state:i,props:g}))}function o(e){var t=e.editor,n=e.domDocument,a=e.state,r=e.props,o=Object(d["h"])(n,"div",{class:"raw-html-embed__buttons-wrapper"});if(a.isEditable){var l=b(t,"save",r.onSaveClick),c=b(t,"cancel",r.onCancelClick);o.append(l.element,c.element),i.add(l).add(c)}else{var u=b(t,"edit",r.onEditClick);o.append(u.element),i.add(u)}return o}function l(e){var t=e.domDocument,n=e.state,i=e.props,a=Object(d["h"])(t,"textarea",{placeholder:i.placeholder,class:"ck ck-reset ck-input ck-input-text raw-html-embed__source"});return a.disabled=i.isDisabled,a.value=n.getRawHtmlValue(),a}function s(e){var n=e.domDocument,i=e.state,a=e.props,r=e.editor,o=a.sanitizeHtml(i.getRawHtmlValue()),l=i.getRawHtmlValue().length>0?t("No preview available"):t("Empty snippet content"),c=Object(d["h"])(n,"div",{class:"ck ck-reset_all raw-html-embed__preview-placeholder"},l),u=Object(d["h"])(n,"div",{class:"raw-html-embed__preview-content",dir:r.locale.contentLanguageDirection}),s=n.createRange(),m=s.createContextualFragment(o.html);u.appendChild(m);var g=Object(d["h"])(n,"div",{class:"raw-html-embed__preview"},[c,u]);return g}this.editor.editing.view.on("render",(function(){var e,t=Object(u["a"])(i);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.element.isConnected)return;n.destroy(),i.delete(n)}}catch(a){t.e(a)}finally{t.f()}}),{priority:"lowest"}),e.data.registerRawContentMatcher({name:"div",classes:"raw-html-embed"}),e.conversion.for("upcast").elementToElement({view:{name:"div",classes:"raw-html-embed"},model:function(e,t){var n=t.writer;return n.createElement("rawHtml",{value:e.getCustomProperty("$rawContent")})}}),e.conversion.for("dataDowncast").elementToElement({model:"rawHtml",view:function(e,t){var n=t.writer;return n.createRawElement("div",{class:"raw-html-embed"},(function(t){t.innerHTML=e.getAttribute("value")||""}))}}),e.conversion.for("editingDowncast").elementToElement({triggerBy:{attributes:["value"]},model:"rawHtml",view:function(i,o){var l,u,s,d=o.writer,m=d.createContainerElement("div",{class:"raw-html-embed","data-html-embed-label":t("HTML snippet"),dir:e.locale.uiLanguageDirection}),g=d.createRawElement("div",{class:"raw-html-embed__content-wrapper"},(function(t){l=t,r({domElement:t,editor:e,state:u,props:s}),l.addEventListener("mousedown",(function(){if(u.isEditable){var t=e.model,n=t.document.selection.getSelectedElement();n!==i&&t.change((function(e){return e.setSelection(i,"on")}))}}),!0)})),f={makeEditable:function(){u=Object.assign({},u,{isEditable:!0}),r({domElement:l,editor:e,state:u,props:s}),n.change((function(e){e.setAttribute("data-cke-ignore-events","true",g)})),l.querySelector("textarea").focus()},save:function(t){t!==u.getRawHtmlValue()?(e.execute("htmlEmbed",t),e.editing.view.focus()):this.cancel()},cancel:function(){u=Object.assign({},u,{isEditable:!1}),r({domElement:l,editor:e,state:u,props:s}),e.editing.view.focus(),n.change((function(e){e.removeAttribute("data-cke-ignore-events",g)}))}};return u={showPreviews:a.showPreviews,isEditable:!1,getRawHtmlValue:function(){return i.getAttribute("value")||""}},s={sanitizeHtml:a.sanitizeHtml,textareaPlaceholder:t("Paste raw HTML here..."),onEditClick:function(){f.makeEditable()},onSaveClick:function(e){f.save(e)},onCancelClick:function(){f.cancel()}},d.insert(d.createPositionAt(m,0),g),d.setCustomProperty("rawHtmlApi",f,m),d.setCustomProperty("rawHtml",!0,m),Object(c["f"])(m,d,{widgetLabel:t("HTML snippet"),hasSelectionHandle:!0})}})}}],[{key:"pluginName",get:function(){return"HtmlEmbedEditing"}}]),n}(l["g"]);function b(e,t,n){var i=e.locale.t,a=new s["c"](e.locale),r=e.commands.get("htmlEmbed");return a.set({class:"raw-html-embed__".concat(t,"-button"),icon:l["i"].pencil,tooltip:!0,tooltipPosition:"rtl"===e.locale.uiLanguageDirection?"e":"w"}),a.render(),"edit"===t?(a.set({icon:l["i"].pencil,label:i("Edit source")}),a.bind("isEnabled").to(r)):"save"===t?(a.set({icon:l["i"].check,label:i("Save changes")}),a.bind("isEnabled").to(r)):a.set({icon:l["i"].cancel,label:i("Cancel")}),a.on("execute",n),a}var p=n("ce26"),y=n.n(p),w=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.t;t.ui.componentFactory.add("htmlEmbed",(function(i){var a=t.commands.get("htmlEmbed"),r=new s["c"](i);return r.set({label:n("Insert HTML"),icon:y.a,tooltip:!0}),r.bind("isEnabled").to(a,"isEnabled"),e.listenTo(r,"execute",(function(){t.execute("htmlEmbed"),t.editing.view.focus();var e=t.editing.view.document.selection.getSelectedElement();e.getCustomProperty("rawHtmlApi").makeEditable()})),r}))}}],[{key:"pluginName",get:function(){return"HtmlEmbedUI"}}]),n}(l["g"]),k=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,null,[{key:"requires",get:function(){return[v,w,c["a"]]}},{key:"pluginName",get:function(){return"HtmlEmbed"}}]),n}(l["g"])},"0bf6":function(e,t,n){"use strict";n.d(t,"a",(function(){return q}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),l=n("a242"),c=n("b85c"),u=(n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("b0c0"),n("caad"),n("2532"),function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e,a){var r;return Object(i["a"])(this,n),r=t.call(this,e),r._defaultStyles={imageBlock:!1,imageInline:!1},r._styles=new Map(a.map((function(e){if(e.isDefault){var t,n=Object(c["a"])(e.modelElements);try{for(n.s();!(t=n.n()).done;){var i=t.value;r._defaultStyles[i]=e.name}}catch(a){n.e(a)}finally{n.f()}}return[e.name,e]}))),r}return Object(a["a"])(n,[{key:"refresh",value:function(){var e=this.editor,t=e.plugins.get("ImageUtils"),n=t.getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!n,this.isEnabled?n.hasAttribute("imageStyle")?this.value=n.getAttribute("imageStyle"):this.value=this._defaultStyles[n.name]:this.value=!1}},{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.editor,i=n.model,a=n.plugins.get("ImageUtils");i.change((function(n){var r=t.value,o=a.getClosestSelectedImageElement(i.document.selection);r&&e.shouldConvertImageType(r,o)&&(e.editor.execute(a.isBlockImage(o)?"imageTypeInline":"imageTypeBlock"),o=a.getClosestSelectedImageElement(i.document.selection)),!r||e._styles.get(r).isDefault?n.removeAttribute("imageStyle",o):n.setAttribute("imageStyle",r,o)}))}},{key:"shouldConvertImageType",value:function(e,t){var n=this._styles.get(e).modelElements;return!n.includes(t.name)}}]),n}(l["a"])),s=n("6e4c"),d=n("5530"),m=(n("4de4"),n("99af"),n("4fdd")),g=l["i"].objectFullWidth,f=l["i"].objectInline,h=l["i"].objectLeft,v=l["i"].objectRight,b=l["i"].objectCenter,p=l["i"].objectBlockLeft,y=l["i"].objectBlockRight,w={inline:{name:"inline",title:"In line",icon:f,modelElements:["imageInline"],isDefault:!0},alignLeft:{name:"alignLeft",title:"Left aligned image",icon:h,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"},alignBlockLeft:{name:"alignBlockLeft",title:"Left aligned image",icon:p,modelElements:["imageBlock"],className:"image-style-block-align-left"},alignCenter:{name:"alignCenter",title:"Centered image",icon:b,modelElements:["imageBlock"],className:"image-style-align-center"},alignRight:{name:"alignRight",title:"Right aligned image",icon:v,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"},alignBlockRight:{name:"alignBlockRight",title:"Right aligned image",icon:y,modelElements:["imageBlock"],className:"image-style-block-align-right"},block:{name:"block",title:"Centered image",icon:b,modelElements:["imageBlock"],isDefault:!0},side:{name:"side",title:"Side image",icon:v,modelElements:["imageBlock"],className:"image-style-side"}},k={full:g,left:p,right:y,center:b,inlineLeft:h,inlineRight:v,inline:f},I=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function O(e){var t=e.configuredStyles.options||[],n=t.map((function(e){return C(e)})).filter((function(t){return _(t,e)}));return n}function j(e,t){return e&&t?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:e?{options:["block","side"]}:t?{options:["inline","alignLeft","alignRight"]}:{}}function E(e){return e.has("ImageBlockEditing")&&e.has("ImageInlineEditing")?[].concat(I):[]}function C(e){return e="string"===typeof e?w[e]?Object(d["a"])({},w[e]):{name:e}:A(w[e.name],e),"string"===typeof e.icon&&(e.icon=k[e.icon]||e.icon),e}function _(e,t){var n=t.isBlockPluginLoaded,i=t.isInlinePluginLoaded,a=e.modelElements,r=e.name;if(!(a&&a.length&&r))return S({style:e}),!1;var o=[n?"imageBlock":null,i?"imageInline":null];return!!a.some((function(e){return o.includes(e)}))||(Object(m["p"])("image-style-missing-dependency",{style:e,missingPlugins:a.map((function(e){return"imageBlock"===e?"ImageBlockEditing":"ImageInlineEditing"}))}),!1)}function A(e,t){var n=Object(d["a"])({},t);for(var i in e)Object.prototype.hasOwnProperty.call(t,i)||(n[i]=e[i]);return n}function S(e){Object(m["p"])("image-style-configuration-definition-invalid",e)}var B={normalizeStyles:O,getDefaultStylesConfiguration:j,getDefaultDropdownDefinitions:E,warnInvalidStyle:S,DEFAULT_OPTIONS:w,DEFAULT_ICONS:k,DEFAULT_DROPDOWN_DEFINITIONS:I};
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function T(e){return function(t,n,i){if(i.consumable.consume(n.item,t.name)){var a=z(n.attributeNewValue,e),r=z(n.attributeOldValue,e),o=i.mapper.toViewElement(n.item),l=i.writer;r&&l.removeClass(r.className,o),a&&l.addClass(a.className,o)}}}function x(e){var t={imageInline:e.filter((function(e){return!e.isDefault&&e.modelElements.includes("imageInline")})),imageBlock:e.filter((function(e){return!e.isDefault&&e.modelElements.includes("imageBlock")}))};return function(e,n,i){if(n.modelRange){var a=n.viewItem,r=Object(m["j"])(n.modelRange.getItems());if(r&&i.schema.checkAttribute(r,"imageStyle")){var o,l=Object(c["a"])(t[r.name]);try{for(l.s();!(o=l.n()).done;){var u=o.value;i.consumable.consume(a,{classes:u.className})&&i.writer.setAttribute("imageStyle",u.name,r)}}catch(s){l.e(s)}finally{l.f()}}}}}function z(e,t){var n,i=Object(c["a"])(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.name===e)return a}}catch(r){i.e(r)}finally{i.f()}}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */var V=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,[{key:"init",value:function(){var e=B.normalizeStyles,t=B.getDefaultStylesConfiguration,n=this.editor,i=n.plugins.has("ImageBlockEditing"),a=n.plugins.has("ImageInlineEditing");n.config.define("image.styles",t(i,a)),this.normalizedStyles=e({configuredStyles:n.config.get("image.styles"),isBlockPluginLoaded:i,isInlinePluginLoaded:a}),this._setupConversion(i,a),this._setupPostFixer(),n.commands.add("imageStyle",new u(n,this.normalizedStyles))}},{key:"_setupConversion",value:function(e,t){var n=this.editor,i=n.model.schema,a=T(this.normalizedStyles),r=x(this.normalizedStyles);n.editing.downcastDispatcher.on("attribute:imageStyle",a),n.data.downcastDispatcher.on("attribute:imageStyle",a),e&&(i.extend("imageBlock",{allowAttributes:"imageStyle"}),n.data.upcastDispatcher.on("element:figure",r,{priority:"low"})),t&&(i.extend("imageInline",{allowAttributes:"imageStyle"}),n.data.upcastDispatcher.on("element:img",r,{priority:"low"}))}},{key:"_setupPostFixer",value:function(){var e=this.editor,t=e.model.document,n=e.plugins.get(s["a"]),i=new Map(this.normalizedStyles.map((function(e){return[e.name,e]})));t.registerPostFixer((function(e){var a,r=!1,o=Object(c["a"])(t.differ.getChanges());try{for(o.s();!(a=o.n()).done;){var l=a.value;if("insert"==l.type||"attribute"==l.type&&"imageStyle"==l.attributeKey){var u="insert"==l.type?l.position.nodeAfter:l.range.start.nodeAfter;if(u&&u.is("element","paragraph")&&u.childCount>0&&(u=u.getChild(0)),!n.isImage(u))continue;var s=u.getAttribute("imageStyle");if(!s)continue;var d=i.get(s);d&&d.modelElements.includes(u.name)||(e.removeAttribute("imageStyle",u),r=!0)}}}catch(m){o.e(m)}finally{o.f()}return r}))}}],[{key:"pluginName",get:function(){return"ImageStyleEditing"}},{key:"requires",get:function(){return[s["a"]]}}]),n}(l["g"]),N=n("2909"),P=(n("7db0"),n("c740"),n("02d4")),R=n("2332"),H=n("f976"),L=(n("7201"),function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,[{key:"localizedDefaultStylesTitles",get:function(){var e=this.editor.t;return{"Wrap text":e("Wrap text"),"Break text":e("Break text"),"In line":e("In line"),"Full size image":e("Full size image"),"Side image":e("Side image"),"Left aligned image":e("Left aligned image"),"Centered image":e("Centered image"),"Right aligned image":e("Right aligned image")}}},{key:"init",value:function(){var e,t=this.editor.plugins,n=this.editor.config.get("image.toolbar")||[],i=D(t.get("ImageStyleEditing").normalizedStyles,this.localizedDefaultStylesTitles),a=Object(c["a"])(i);try{for(a.s();!(e=a.n()).done;){var r=e.value;this._createButton(r)}}catch(d){a.e(d)}finally{a.f()}var o,l=D([].concat(Object(N["a"])(n.filter(R["a"])),Object(N["a"])(B.getDefaultDropdownDefinitions(t))),this.localizedDefaultStylesTitles),u=Object(c["a"])(l);try{for(u.s();!(o=u.n()).done;){var s=o.value;this._createDropdown(s,i)}}catch(d){u.e(d)}finally{u.f()}}},{key:"_createDropdown",value:function(e,t){var n=this.editor.ui.componentFactory;n.add(e.name,(function(i){var a,r=e.defaultItem,o=e.items,l=e.title,c=o.filter((function(e){return t.find((function(t){var n=t.name;return U(n)===e}))})).map((function(e){var t=n.create(e);return e===r&&(a=t),t}));o.length!==c.length&&B.warnInvalidStyle({dropdown:e});var u=Object(P["B"])(i,P["q"]),s=u.buttonView;return Object(P["z"])(u,c),s.set({label:F(l,a.label),class:null,tooltip:!0}),s.bind("icon").toMany(c,"isOn",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.findIndex(H["a"]);return i<0?a.icon:c[i].icon})),s.bind("label").toMany(c,"isOn",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.findIndex(H["a"]);return F(l,i<0?a.label:c[i].label)})),s.bind("isOn").toMany(c,"isOn",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some(H["a"])})),s.bind("class").toMany(c,"isOn",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some(H["a"])?"ck-splitbutton_flatten":null})),s.on("execute",(function(){c.some((function(e){var t=e.isOn;return t}))?u.isOpen=!u.isOpen:a.fire("execute")})),u.bind("isEnabled").toMany(c,"isEnabled",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some(H["a"])})),u}))}},{key:"_createButton",value:function(e){var t=this,n=e.name;this.editor.ui.componentFactory.add(U(n),(function(i){var a=t.editor.commands.get("imageStyle"),r=new P["c"](i);return r.set({label:e.title,icon:e.icon,tooltip:!0,isToggleable:!0}),r.bind("isEnabled").to(a,"isEnabled"),r.bind("isOn").to(a,"value",(function(e){return e===n})),r.on("execute",t._executeCommand.bind(t,n)),r}))}},{key:"_executeCommand",value:function(e){this.editor.execute("imageStyle",{value:e}),this.editor.editing.view.focus()}}],[{key:"requires",get:function(){return[V]}},{key:"pluginName",get:function(){return"ImageStyleUI"}}]),n}(l["g"]));function D(e,t){var n,i=Object(c["a"])(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;t[a.title]&&(a.title=t[a.title])}}catch(r){i.e(r)}finally{i.f()}return e}function U(e){return"imageStyle:".concat(e)}function F(e,t){return(e?e+": ":"")+t}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */var q=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,null,[{key:"requires",get:function(){return[V,L]}},{key:"pluginName",get:function(){return"ImageStyle"}}]),n}(l["g"])},"233a":function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),l=n("a242"),c=(n("d3b7"),n("3ca3"),n("10d1"),n("ddb0"),n("bf19"),n("553a")),u=n("5595"),s=n("f6a7"),d=n("b85c");n("b0c0");
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
function m(e){var t,n=Object(d["a"])(e.getChildren());try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i&&i.is("element","caption"))return i}}catch(a){n.e(a)}finally{n.f()}return null}function g(e,t){var n=t.getFirstPosition().findAncestor("caption");return n&&e.isBlockImage(n.parent)?n:null}function f(e,t){return"figcaption"==t.name&&e.isBlockImageView(t.parent)?{name:!0}:null}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */var h=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,[{key:"refresh",value:function(){var e=this.editor,t=e.plugins.get("ImageUtils");if(!e.plugins.has(s["a"]))return this.isEnabled=!1,void(this.value=!1);var n=e.model.document.selection,i=n.getSelectedElement();if(!i){var a=g(t,n);return this.isEnabled=!!a,void(this.value=!!a)}this.isEnabled=this.editor.plugins.get("ImageUtils").isImage(i),this.isEnabled?this.value=!!m(i):this.value=!1}},{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.focusCaptionOnShow;this.editor.model.change((function(t){e.value?e._hideImageCaption(t):e._showImageCaption(t,n)}))}},{key:"_showImageCaption",value:function(e,t){var n=this.editor.model,i=n.document.selection,a=this.editor.plugins.get("ImageCaptionEditing"),r=i.getSelectedElement(),o=a._getSavedCaption(r);this.editor.plugins.get("ImageUtils").isInlineImage(r)&&(this.editor.execute("imageTypeBlock"),r=i.getSelectedElement());var l=o||e.createElement("caption");e.append(l,r),t&&e.setSelection(l,"in")}},{key:"_hideImageCaption",value:function(e){var t,n=this.editor,i=n.model.document.selection,a=n.plugins.get("ImageCaptionEditing"),r=n.plugins.get("ImageUtils"),o=i.getSelectedElement();o?t=m(o):(t=g(r,i),o=t.parent),a._saveCaption(o,t),e.setSelection(o,"on"),e.remove(t)}}]),n}(l["a"]),v=n("6e4c"),b=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,e),a._savedCaptionsMap=new WeakMap,a}return Object(a["a"])(n,[{key:"init",value:function(){var e=this.editor,t=e.model.schema;t.isRegistered("caption")?t.extend("caption",{allowIn:"imageBlock"}):t.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleImageCaption",new h(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration()}},{key:"_setupConversion",value:function(){var e=this.editor,t=e.editing.view,n=e.plugins.get("ImageUtils"),i=e.t;e.conversion.for("upcast").elementToElement({view:function(e){return f(n,e)},model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:function(e,t){var i=t.writer;return n.isBlockImage(e.parent)?i.createContainerElement("figcaption"):null}}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:function(e,a){var r=a.writer;if(!n.isBlockImage(e.parent))return null;var o=r.createEditableElement("figcaption");return r.setCustomProperty("imageCaption",!0,o),Object(c["p"])({view:t,element:o,text:i("Enter image caption"),keepOnFocus:!0}),Object(u["g"])(o,r)}}),e.editing.mapper.on("modelToViewPosition",p(t)),e.data.mapper.on("modelToViewPosition",p(t))}},{key:"_setupImageTypeCommandsIntegration",value:function(){var e=this,t=this.editor,n=t.plugins.get("ImageUtils"),i=t.commands.get("imageTypeInline"),a=t.commands.get("imageTypeBlock"),r=function(t){if(t.return){var i=t.return,a=i.oldElement,r=i.newElement;if(a){if(n.isBlockImage(a)){var o=m(a);if(o)return void e._saveCaption(r,o)}var l=e._getSavedCaption(a);l&&e._saveCaption(r,l)}}};i&&this.listenTo(i,"execute",r,{priority:"low"}),a&&this.listenTo(a,"execute",r,{priority:"low"})}},{key:"_getSavedCaption",value:function(e){var t=this._savedCaptionsMap.get(e);return t?c["d"].fromJSON(t):null}},{key:"_saveCaption",value:function(e,t){this._savedCaptionsMap.set(e,t.toJSON())}}],[{key:"requires",get:function(){return[v["a"]]}},{key:"pluginName",get:function(){return"ImageCaptionEditing"}}]),n}(l["g"]);function p(e){return function(t,n){var i=n.modelPosition,a=i.parent;if(a.is("element","imageBlock")){var r=n.mapper.toViewElement(a);n.viewPosition=e.createPositionAt(r,i.offset+1)}}}var y=n("02d4"),w=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.editing.view,i=t.plugins.get("ImageUtils"),a=t.t;t.ui.componentFactory.add("toggleImageCaption",(function(r){var o=t.commands.get("toggleImageCaption"),c=new y["c"](r);return c.set({icon:l["i"].caption,tooltip:!0,isToggleable:!0}),c.bind("isOn","isEnabled").to(o,"value","isEnabled"),c.bind("label").to(o,"value",(function(e){return a(e?"Toggle caption off":"Toggle caption on")})),e.listenTo(c,"execute",(function(){t.execute("toggleImageCaption",{focusCaptionOnShow:!0});var e=g(i,t.model.document.selection);if(e){var a=t.editing.mapper.toViewElement(e);n.scrollToTheSelection(),n.change((function(e){e.addClass("image__caption_highlighted",a)}))}})),c}))}}],[{key:"requires",get:function(){return[v["a"]]}},{key:"pluginName",get:function(){return"ImageCaptionUI"}}]),n}(l["g"]),k=(n("c44c"),function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,null,[{key:"requires",get:function(){return[b,w]}},{key:"pluginName",get:function(){return"ImageCaption"}}]),n}(l["g"]));
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */},"34ce":function(e,t,n){},3523:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));n("3835"),n("b85c"),n("ac1f"),n("00b4"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("a630"),n("b64b"),n("b0c0"),n("99af");var i=n("4fdd");
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
function a(e){return function(e){e.on("element:figure",t)};function t(t,n,a){if(a.consumable.test(n.viewItem,{name:!0,classes:"image"})){var r=e.findViewImgElement(n.viewItem);if(r&&a.consumable.test(r,{name:!0})){a.consumable.consume(n.viewItem,{name:!0,classes:"image"});var o=a.convertItem(r,n.modelCursor),l=Object(i["j"])(o.modelRange.getItems());l?(a.convertChildren(n.viewItem,l),a.updateConversionResult(l,n)):a.consumable.revert(n.viewItem,{name:!0,classes:"image"})}}}}function r(e,t){return function(e){e.on("attribute:srcset:".concat(t),n)};function n(t,n,i){if(i.consumable.consume(n.item,t.name)){var a=i.writer,r=i.mapper.toViewElement(n.item),o=e.findViewImgElement(r);if(null===n.attributeNewValue){var l=n.attributeOldValue;l.data&&(a.removeAttribute("srcset",o),a.removeAttribute("sizes",o),l.width&&a.removeAttribute("width",o))}else{var c=n.attributeNewValue;c.data&&(a.setAttribute("srcset",c.data,o),a.setAttribute("sizes","100vw",o),c.width&&a.setAttribute("width",c.width,o))}}}}function o(e,t,n){return function(e){e.on("attribute:".concat(n,":").concat(t),i)};function i(t,n,i){if(i.consumable.consume(n.item,t.name)){var a=i.writer,r=i.mapper.toViewElement(n.item),o=e.findViewImgElement(r);a.setAttribute(n.attributeKey,n.attributeNewValue||"",o)}}}},"39a0":function(e,t,n){"use strict";n.d(t,"a",(function(){return z}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),l=n("a242"),c=n("5595"),u=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,[{key:"refresh",value:function(){var e=this.editor,t=e.plugins.get("ImageUtils"),n=t.getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!n,this.isEnabled&&n.hasAttribute("alt")?this.value=n.getAttribute("alt"):this.value=!1}},{key:"execute",value:function(e){var t=this.editor,n=t.plugins.get("ImageUtils"),i=t.model,a=n.getClosestSelectedImageElement(i.document.selection);i.change((function(t){t.setAttribute("alt",e.newValue,a)}))}}]),n}(l["a"]),s=n("6e4c"),d=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,[{key:"init",value:function(){this.editor.commands.add("imageTextAlternative",new u(this.editor))}}],[{key:"requires",get:function(){return[s["a"]]}},{key:"pluginName",get:function(){return"ImageTextAlternativeEditing"}}]),n}(l["g"]),m=n("45eb"),g=n("7e84"),f=n("02d4"),h=n("257e"),v=(n("d3b7"),n("159b"),n("4fdd")),b=(n("6649"),n("7946"),function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;Object(i["a"])(this,n),a=t.call(this,e);var r=a.locale.t;return a.focusTracker=new v["d"],a.keystrokes=new v["e"],a.labeledInput=a._createLabeledInputView(),a.saveButtonView=a._createButton(r("Save"),l["i"].check,"ck-button-save"),a.saveButtonView.type="submit",a.cancelButtonView=a._createButton(r("Cancel"),l["i"].cancel,"ck-button-cancel","cancel"),a._focusables=new f["x"],a._focusCycler=new f["h"]({focusables:a._focusables,focusTracker:a.focusTracker,keystrokeHandler:a.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),a.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[a.labeledInput,a.saveButtonView,a.cancelButtonView]}),Object(f["G"])(Object(h["a"])(a)),a}return Object(a["a"])(n,[{key:"render",value:function(){var e=this;Object(m["a"])(Object(g["a"])(n.prototype),"render",this).call(this),this.keystrokes.listenTo(this.element),Object(f["J"])({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach((function(t){e._focusables.add(t),e.focusTracker.add(t.element)}))}},{key:"destroy",value:function(){Object(m["a"])(Object(g["a"])(n.prototype),"destroy",this).call(this),this.focusTracker.destroy(),this.keystrokes.destroy()}},{key:"_createButton",value:function(e,t,n,i){var a=new f["c"](this.locale);return a.set({label:e,icon:t,tooltip:!0}),a.extendTemplate({attributes:{class:n}}),i&&a.delegate("execute").to(this,i),a}},{key:"_createLabeledInputView",value:function(){var e=this.locale.t,t=new f["n"](this.locale,f["D"]);return t.label=e("Text alternative"),t}}]),n}(f["w"]));
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
function p(e){var t=e.plugins.get("ContextualBalloon");if(e.plugins.get("ImageUtils").getClosestSelectedImageWidget(e.editing.view.document.selection)){var n=y(e);t.updatePosition(n)}}function y(e){var t=e.editing.view,n=f["a"].defaultPositions,i=e.plugins.get("ImageUtils");return{target:t.domConverter.viewToDom(i.getClosestSelectedImageWidget(t.document.selection)),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast,n.viewportStickyNorth]}}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */var w=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,[{key:"init",value:function(){this._createButton(),this._createForm()}},{key:"destroy",value:function(){Object(m["a"])(Object(g["a"])(n.prototype),"destroy",this).call(this),this._form.destroy()}},{key:"_createButton",value:function(){var e=this,t=this.editor,n=t.t;t.ui.componentFactory.add("imageTextAlternative",(function(i){var a=t.commands.get("imageTextAlternative"),r=new f["c"](i);return r.set({label:n("Change image text alternative"),icon:l["i"].lowVision,tooltip:!0}),r.bind("isEnabled").to(a,"isEnabled"),e.listenTo(r,"execute",(function(){e._showForm()})),r}))}},{key:"_createForm",value:function(){var e=this,t=this.editor,n=t.editing.view,i=n.document,a=t.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new b(t.locale),this._form.render(),this.listenTo(this._form,"submit",(function(){t.execute("imageTextAlternative",{newValue:e._form.labeledInput.fieldView.element.value}),e._hideForm(!0)})),this.listenTo(this._form,"cancel",(function(){e._hideForm(!0)})),this._form.keystrokes.set("Esc",(function(t,n){e._hideForm(!0),n()})),this.listenTo(t.ui,"update",(function(){a.getClosestSelectedImageWidget(i.selection)?e._isVisible&&p(t):e._hideForm(!0)})),Object(f["A"])({emitter:this._form,activator:function(){return e._isVisible},contextElements:[this._balloon.view.element],callback:function(){return e._hideForm()}})}},{key:"_showForm",value:function(){if(!this._isVisible){var e=this.editor,t=e.commands.get("imageTextAlternative"),n=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:y(e)}),n.fieldView.value=n.fieldView.element.value=t.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}}},{key:"_hideForm",value:function(e){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}},{key:"_isVisible",get:function(){return this._balloon.visibleView===this._form}},{key:"_isInBalloon",get:function(){return this._balloon.hasView(this._form)}}],[{key:"requires",get:function(){return[f["f"]]}},{key:"pluginName",get:function(){return"ImageTextAlternativeUI"}}]),n}(l["g"]),k=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,null,[{key:"requires",get:function(){return[d,w]}},{key:"pluginName",get:function(){return"ImageTextAlternative"}}]),n}(l["g"]),I=n("f6a7"),O=(n("92bd"),function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,null,[{key:"requires",get:function(){return[I["a"],c["a"],k]}},{key:"pluginName",get:function(){return"ImageBlock"}}]),n}(l["g"])),j=n("2909"),E=(n("8a79"),n("b0c0"),n("a630"),n("3ca3"),n("d81d"),n("99af"),n("489d")),C=n("553a"),_=n("3523"),A=n("b6ab"),S=n("a6f1"),B=n("beb5"),T=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,[{key:"init",value:function(){var e=this.editor,t=e.model.schema;t.register("imageInline",{isObject:!0,isInline:!0,allowWhere:"$text",allowAttributesOf:"$text",allowAttributes:["alt","src","srcset"]}),t.addChildCheck((function(e,t){if(e.endsWith("caption")&&"imageInline"===t.name)return!1})),this._setupConversion(),e.plugins.has("ImageBlockEditing")&&(e.commands.add("imageTypeInline",new S["a"](this.editor,"imageInline")),this._setupClipboardIntegration())}},{key:"_setupConversion",value:function(){var e=this.editor,t=e.t,n=e.conversion,i=e.plugins.get("ImageUtils");n.for("dataDowncast").elementToElement({model:"imageInline",view:function(e,t){var n=t.writer;return n.createEmptyElement("img")}}),n.for("editingDowncast").elementToElement({model:"imageInline",view:function(e,n){var a=n.writer;return i.toImageWidget(Object(B["a"])(a,"imageInline"),a,t("image widget"))}}),n.for("downcast").add(Object(_["a"])(i,"imageInline","src")).add(Object(_["a"])(i,"imageInline","alt")).add(Object(_["b"])(i,"imageInline")),n.for("upcast").elementToElement({view:Object(B["c"])(e,"imageInline"),model:function(e,t){var n=t.writer;return n.createElement("imageInline",e.hasAttribute("src")?{src:e.getAttribute("src")}:null)}})}},{key:"_setupClipboardIntegration",value:function(){var e=this.editor,t=e.model,n=e.editing.view,i=e.plugins.get("ImageUtils");this.listenTo(e.plugins.get("ClipboardPipeline"),"inputTransformation",(function(a,r){var o,l=Array.from(r.content.getChildren());if(l.every(i.isBlockImageView)){o=r.targetRanges?e.editing.mapper.toModelRange(r.targetRanges[0]):t.document.selection.getFirstRange();var c=t.createSelection(o);if("imageInline"===Object(B["b"])(t.schema,c)){var u=new C["k"](n.document),s=l.map((function(e){return 1===e.childCount?(Array.from(e.getAttributes()).forEach((function(t){return u.setAttribute.apply(u,Object(j["a"])(t).concat([i.findViewImgElement(e)]))})),e.getChild(0)):e}));r.content=u.createDocumentFragment(s)}}}))}}],[{key:"requires",get:function(){return[A["a"],s["a"],E["b"]]}},{key:"pluginName",get:function(){return"ImageInlineEditing"}}]),n}(l["g"]),x=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,null,[{key:"requires",get:function(){return[T,c["a"],k]}},{key:"pluginName",get:function(){return"ImageInline"}}]),n}(l["g"]),z=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,null,[{key:"requires",get:function(){return[O,x]}},{key:"pluginName",get:function(){return"Image"}}]),n}(l["g"]);
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */},"56b3a":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),l=(n("d81d"),n("b0c0"),n("a242")),c=n("5595"),u=n("6e4c"),s=n("2332"),d=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,[{key:"afterInit",value:function(){var e=this.editor,t=e.t,n=e.plugins.get(c["c"]),i=e.plugins.get("ImageUtils");n.register("image",{ariaLabel:t("Image toolbar"),items:m(e.config.get("image.toolbar")||[]),getRelatedElement:function(e){return i.getClosestSelectedImageWidget(e)}})}}],[{key:"requires",get:function(){return[c["c"],u["a"]]}},{key:"pluginName",get:function(){return"ImageToolbar"}}]),n}(l["g"]);function m(e){return e.map((function(e){return Object(s["a"])(e)?e.name:e}))}},"5f69":function(e,t,n){},"64f1":function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),l=n("a242"),c=n("b85c"),u=(n("b0c0"),n("7db0"),n("d3b7"),n("d81d"),n("02d4")),s=n("4fdd"),d=n("6e4c"),m=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,[{key:"refresh",value:function(){var e=this.editor,t=e.plugins.get("ImageUtils"),n=t.getClosestSelectedImageElement(e.model.document.selection);this.isEnabled=!!n,n&&n.hasAttribute("width")?this.value={width:n.getAttribute("width"),height:null}:this.value=null}},{key:"execute",value:function(e){var t=this.editor,n=t.model,i=t.plugins.get("ImageUtils"),a=i.getClosestSelectedImageElement(n.document.selection);this.value={width:e.width,height:null},a&&n.change((function(t){t.setAttribute("width",e.width,a)}))}}]),n}(l["a"]),g=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,e),e.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]}),a}return Object(a["a"])(n,[{key:"init",value:function(){var e=this.editor,t=new m(e);this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline"),e.commands.add("resizeImage",t),e.commands.add("imageResize",t)}},{key:"_registerSchema",value:function(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:"width"}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:"width"})}},{key:"_registerConverters",value:function(e){var t=this.editor;t.conversion.for("downcast").add((function(t){return t.on("attribute:width:".concat(e),(function(e,t,n){if(n.consumable.consume(t.item,e.name)){var i=n.writer,a=n.mapper.toViewElement(t.item);null!==t.attributeNewValue?(i.setStyle("width",t.attributeNewValue,a),i.addClass("image_resized",a)):(i.removeStyle("width",a),i.removeClass("image_resized",a))}}))})),t.conversion.for("upcast").attributeToAttribute({view:{name:"imageBlock"===e?"figure":"img",styles:{width:/.+/}},model:{key:"width",value:function(e){return e.getStyle("width")}}})}}],[{key:"requires",get:function(){return[d["a"]]}},{key:"pluginName",get:function(){return"ImageResizeEditing"}}]),n}(l["g"]),f={small:l["i"].objectSizeSmall,medium:l["i"].objectSizeMedium,large:l["i"].objectSizeLarge,original:l["i"].objectSizeFull},h=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,e),a._resizeUnit=e.config.get("image.resizeUnit"),a}return Object(a["a"])(n,[{key:"init",value:function(){var e=this.editor,t=e.config.get("image.resizeOptions"),n=e.commands.get("resizeImage");this.bind("isEnabled").to(n);var i,a=Object(c["a"])(t);try{for(a.s();!(i=a.n()).done;){var r=i.value;this._registerImageResizeButton(r)}}catch(o){a.e(o)}finally{a.f()}this._registerImageResizeDropdown(t)}},{key:"_registerImageResizeButton",value:function(e){var t=this,n=this.editor,i=e.name,a=e.value,r=e.icon,o=a?a+this._resizeUnit:null;n.ui.componentFactory.add(i,(function(i){var a=new u["c"](i),l=n.commands.get("resizeImage"),c=t._getOptionLabelValue(e,!0);if(!f[r])throw new s["a"]("imageresizebuttons-missing-icon",n,e);return a.set({label:c,icon:f[r],tooltip:c,isToggleable:!0}),a.bind("isEnabled").to(t),a.bind("isOn").to(l,"value",v(o)),t.listenTo(a,"execute",(function(){n.execute("resizeImage",{width:o})})),a}))}},{key:"_registerImageResizeDropdown",value:function(e){var t=this,n=this.editor,i=n.t,a=e.find((function(e){return!e.value})),r=function(r){var o=n.commands.get("resizeImage"),l=Object(u["B"])(r,u["g"]),c=l.buttonView;return c.set({tooltip:i("Resize image"),commandValue:a.value,icon:f.medium,isToggleable:!0,label:t._getOptionLabelValue(a),withText:!0,class:"ck-resize-image-button"}),c.bind("label").to(o,"value",(function(e){return e&&e.width?e.width:t._getOptionLabelValue(a)})),l.bind("isOn").to(o),l.bind("isEnabled").to(t),Object(u["y"])(l,t._getResizeDropdownListItemDefinitions(e,o)),l.listView.ariaLabel=i("Image resize list"),t.listenTo(l,"execute",(function(e){n.execute(e.source.commandName,{width:e.source.commandValue}),n.editing.view.focus()})),l};n.ui.componentFactory.add("resizeImage",r),n.ui.componentFactory.add("imageResize",r)}},{key:"_getOptionLabelValue",value:function(e,t){var n=this.editor.t;return e.label?e.label:t?e.value?n("Resize image to %0",e.value+this._resizeUnit):n("Resize image to the original size"):e.value?e.value+this._resizeUnit:n("Original")}},{key:"_getResizeDropdownListItemDefinitions",value:function(e,t){var n=this,i=new s["b"];return e.map((function(e){var a=e.value?e.value+n._resizeUnit:null,r={type:"button",model:new u["o"]({commandName:"resizeImage",commandValue:a,label:n._getOptionLabelValue(e),withText:!0,icon:null})};r.model.bind("isOn").to(t,"value",v(a)),i.add(r)})),i}}],[{key:"requires",get:function(){return[g]}},{key:"pluginName",get:function(){return"ImageResizeButtons"}}]),n}(l["g"]);function v(e){return function(t){return null===e&&t===e||t&&t.width===e}}var b=n("5595"),p=n("ab38"),y="figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img",w=/(image|image-inline)/,k="image_resized",I=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,[{key:"init",value:function(){var e=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(e),this._setupResizerCreator()}},{key:"_setupResizerCreator",value:function(){var e=this,t=this.editor,n=t.editing.view;n.addObserver(p["a"]),this.listenTo(n.document,"imageLoaded",(function(i,a){if(a.target.matches(y)){var r=t.editing.view.domConverter,o=r.domToView(a.target),l=o.findAncestor({classes:w}),c=e.editor.plugins.get(b["b"]).getResizerByViewElement(l);if(c)c.redraw();else{var u=t.editing.mapper,s=u.toModelElement(l);c=t.plugins.get(b["b"]).attachTo({unit:t.config.get("image.resizeUnit"),modelElement:s,viewElement:l,editor:t,getHandleHost:function(e){return e.querySelector("img")},getResizeHost:function(){return r.viewToDom(u.toViewElement(s.parent))},isCentered:function(){var e=s.getAttribute("imageStyle");return!e||"block"==e||"alignCenter"==e},onCommit:function(e){n.change((function(e){e.removeClass(k,l)})),t.execute("resizeImage",{width:e})}}),c.on("updateSize",(function(){l.hasClass(k)||n.change((function(e){e.addClass(k,l)}))})),c.bind("isEnabled").to(e)}}}))}}],[{key:"requires",get:function(){return[b["b"]]}},{key:"pluginName",get:function(){return"ImageResizeHandles"}}]),n}(l["g"]),O=(n("d043"),function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,null,[{key:"requires",get:function(){return[g,I,h]}},{key:"pluginName",get:function(){return"ImageResize"}}]),n}(l["g"]))},6649:function(e,t,n){},"6e4c":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("2909"),a=n("b85c"),r=n("5530"),o=n("d4ec"),l=n("bee2"),c=n("262e"),u=n("2caf"),s=(n("c1f9"),n("99af"),n("d3b7"),n("a242")),d=n("5595"),m=n("beb5"),g=function(e){Object(c["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return Object(l["a"])(n,[{key:"isImage",value:function(e){return this.isInlineImage(e)||this.isBlockImage(e)}},{key:"isInlineImageView",value:function(e){return!!e&&e.is("element","img")}},{key:"isBlockImageView",value:function(e){return!!e&&e.is("element","figure")&&e.hasClass("image")}},{key:"insertImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.editor,a=i.model,o=a.document.selection;for(var l in n=b(i,t||o,n),e=Object(r["a"])(Object(r["a"])({},Object.fromEntries(o.getAttributes())),e),e)a.schema.checkAttribute(n,l)||delete e[l];return a.change((function(i){var r=i.createElement(n,e);return t||"imageInline"==n||(t=Object(d["d"])(o,a)),a.insertContent(r,t),r.parent?(i.setSelection(r,"on"),r):null}))}},{key:"getClosestSelectedImageWidget",value:function(e){var t=e.getSelectedElement();if(t&&this.isImageWidget(t))return t;var n=e.getFirstPosition().parent;while(n){if(n.is("element")&&this.isImageWidget(n))return n;n=n.parent}return null}},{key:"getClosestSelectedImageElement",value:function(e){var t=e.getSelectedElement();return this.isImage(t)?t:e.getFirstPosition().findAncestor("imageBlock")}},{key:"isImageAllowed",value:function(){var e=this.editor.model,t=e.document.selection;return f(this.editor,t)&&h(t)}},{key:"toImageWidget",value:function(e,t,n){var i=this;t.setCustomProperty("image",!0,e);var a=function(){var t=i.findViewImgElement(e),a=t.getAttribute("alt");return a?"".concat(a," ").concat(n):n};return Object(d["f"])(e,t,{label:a})}},{key:"isImageWidget",value:function(e){return!!e.getCustomProperty("image")&&Object(d["e"])(e)}},{key:"isBlockImage",value:function(e){return!!e&&e.is("element","imageBlock")}},{key:"isInlineImage",value:function(e){return!!e&&e.is("element","imageInline")}},{key:"findViewImgElement",value:function(e){if(this.isInlineImageView(e))return e;var t,n=this.editor.editing.view,i=Object(a["a"])(n.createRangeIn(e));try{for(i.s();!(t=i.n()).done;){var r=t.value.item;if(this.isInlineImageView(r))return r}}catch(o){i.e(o)}finally{i.f()}}}],[{key:"pluginName",get:function(){return"ImageUtils"}}]),n}(s["g"]);function f(e,t){var n=b(e,t);if("imageBlock"==n){var i=v(t,e.model);if(e.model.schema.checkChild(i,"imageBlock"))return!0}else if(e.model.schema.checkChild(t.focus,"imageInline"))return!0;return!1}function h(e){return Object(i["a"])(e.focus.getAncestors()).every((function(e){return!e.is("element","imageBlock")}))}function v(e,t){var n=Object(d["d"])(e,t),i=n.start.parent;return i.isEmpty&&!i.is("element","$root")?i.parent:i}function b(e,t,n){var i=e.model.schema,a=e.config.get("image.insert.type");return e.plugins.has("ImageBlockEditing")?e.plugins.has("ImageInlineEditing")?n||("inline"===a?"imageInline":"block"===a?"imageBlock":t.is("selection")?Object(m["b"])(i,t):i.checkChild(t,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}},"6f6d":function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>'},7201:function(e,t,n){},7212:function(e,t,n){"use strict";n.d(t,"a",(function(){return D}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),l=n("a242"),c=(n("a15b9"),n("d81d"),n("4de4"),n("d3b7"),n("a630"),n("3ca3"),n("ac1f"),n("00b4"),n("633f")),u=(n("5319"),n("4d63"),n("c607"),n("2c3e"),n("25f0"),n("b0c0"),n("466d"),n("4fdd"));
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
function s(e){var t=e.map((function(e){return e.replace("+","\\+")}));return new RegExp("^image\\/(".concat(t.join("|"),")$"))}function d(e){return new Promise((function(t,n){var i=e.getAttribute("src");fetch(i).then((function(e){return e.blob()})).then((function(e){var n=g(e,i),a=n.replace("image/",""),r="image.".concat(a),o=new File([e],r,{type:n});t(o)})).catch((function(e){return e&&"TypeError"===e.name?f(i).then(t).catch(n):n(e)}))}))}function m(e,t){return!(!e.isInlineImageView(t)||!t.getAttribute("src"))&&(t.getAttribute("src").match(/^data:image\/\w+;base64,/g)||t.getAttribute("src").match(/^blob:/g))}function g(e,t){return e.type?e.type:t.match(/data:(image\/\w+);base64/)?t.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}function f(e){return h(e).then((function(t){var n=g(t,e),i=n.replace("image/",""),a="image.".concat(i);return new File([t],a,{type:n})}))}function h(e){return new Promise((function(t,n){var i=u["n"].document.createElement("img");i.addEventListener("load",(function(){var e=u["n"].document.createElement("canvas");e.width=i.width,e.height=i.height;var a=e.getContext("2d");a.drawImage(i,0,0),e.toBlob((function(e){return e?t(e):n()}))})),i.addEventListener("error",(function(){return n()})),i.src=e}))}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */var v=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,[{key:"init",value:function(){var e=this.editor,t=e.t,n=function(n){var i=new c["a"](n),a=e.commands.get("uploadImage"),r=e.config.get("image.upload.types"),o=s(r);return i.set({acceptedType:r.map((function(e){return"image/".concat(e)})).join(","),allowMultipleFiles:!0}),i.buttonView.set({label:t("Insert image"),icon:l["i"].image,tooltip:!0}),i.buttonView.bind("isEnabled").to(a),i.on("done",(function(t,n){var i=Array.from(n).filter((function(e){return o.test(e.type)}));i.length&&e.execute("uploadImage",{file:i})})),i};e.ui.componentFactory.add("uploadImage",n),e.ui.componentFactory.add("imageUpload",n)}}],[{key:"pluginName",get:function(){return"ImageUploadUI"}}]),n}(l["g"]),b=n("b85c"),p=(n("8030"),n("bcf9"),n("5f69"),function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,e),a.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",a}return Object(a["a"])(n,[{key:"init",value:function(){var e=this,t=this.editor;t.plugins.has("ImageBlockEditing")&&t.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",(function(){return e.uploadStatusChange.apply(e,arguments)})),t.plugins.has("ImageInlineEditing")&&t.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",(function(){return e.uploadStatusChange.apply(e,arguments)}))}},{key:"uploadStatusChange",value:function(e,t,n){var i=this.editor,a=t.item,r=a.getAttribute("uploadId");if(n.consumable.consume(t.item,e.name)){var o=i.plugins.get("ImageUtils"),l=i.plugins.get(c["b"]),u=r?t.attributeNewValue:null,s=this.placeholder,d=i.editing.mapper.toViewElement(a),m=n.writer;if("reading"==u)return y(d,m),void k(o,s,d,m);if("uploading"==u){var g=l.loaders.get(r);return y(d,m),void(g?(I(d,m),O(d,m,g,i.editing.view),B(o,d,m,g)):k(o,s,d,m))}"complete"==u&&l.loaders.get(r)&&E(d,m,i.editing.view),j(d,m),I(d,m),w(d,m)}}}],[{key:"pluginName",get:function(){return"ImageUploadProgress"}}]),n}(l["g"]));function y(e,t){e.hasClass("ck-appear")||t.addClass("ck-appear",e)}function w(e,t){t.removeClass("ck-appear",e)}function k(e,t,n,i){n.hasClass("ck-image-upload-placeholder")||i.addClass("ck-image-upload-placeholder",n);var a=e.findViewImgElement(n);a.getAttribute("src")!==t&&i.setAttribute("src",t,a),A(n,"placeholder")||i.insert(i.createPositionAfter(a),_(i))}function I(e,t){e.hasClass("ck-image-upload-placeholder")&&t.removeClass("ck-image-upload-placeholder",e),S(e,t,"placeholder")}function O(e,t,n,i){var a=C(t);t.insert(t.createPositionAt(e,"end"),a),n.on("change:uploadedPercent",(function(e,t,n){i.change((function(e){e.setStyle("width",n+"%",a)}))}))}function j(e,t){S(e,t,"progressBar")}function E(e,t,n){var i=t.createUIElement("div",{class:"ck-image-upload-complete-icon"});t.insert(t.createPositionAt(e,"end"),i),setTimeout((function(){n.change((function(e){return e.remove(e.createRangeOn(i))}))}),3e3)}function C(e){var t=e.createUIElement("div",{class:"ck-progress-bar"});return e.setCustomProperty("progressBar",!0,t),t}function _(e){var t=e.createUIElement("div",{class:"ck-upload-placeholder-loader"});return e.setCustomProperty("placeholder",!0,t),t}function A(e,t){var n,i=Object(b["a"])(e.getChildren());try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.getCustomProperty(t))return a}}catch(r){i.e(r)}finally{i.f()}}function S(e,t,n){var i=A(e,n);i&&t.remove(t.createRangeOn(i))}function B(e,t,n,i){if(i.data){var a=e.findViewImgElement(t);n.setAttribute("src",i.data,a)}}n("4ec9"),n("ddb0"),n("6062"),n("b64b"),n("99af"),n("caad"),n("2532");var T=n("553a"),x=n("02d4"),z=n("489d"),V=n("6e4c"),N=n("5530"),P=(n("c1f9"),n("159b"),function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,[{key:"refresh",value:function(){var e=this.editor,t=e.plugins.get("ImageUtils"),n=e.model.document.selection.getSelectedElement();this.isEnabled=t.isImageAllowed()||t.isImage(n)}},{key:"execute",value:function(e){var t=this,n=Object(u["t"])(e.file),i=this.editor.model.document.selection,a=this.editor.plugins.get("ImageUtils"),r=Object.fromEntries(i.getAttributes());n.forEach((function(e,n){var o=i.getSelectedElement();if(n&&o&&a.isImage(o)){var l=t.editor.model.createPositionAfter(o);t._uploadImage(e,r,l)}else t._uploadImage(e,r)}))}},{key:"_uploadImage",value:function(e,t,n){var i=this.editor,a=i.plugins.get(c["b"]),r=a.createLoader(e),o=i.plugins.get("ImageUtils");r&&o.insertImage(Object(N["a"])(Object(N["a"])({},t),{},{uploadId:r.id}),n)}}]),n}(l["a"])),R=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,e),e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),a._uploadImageElements=new Map,a}return Object(a["a"])(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.model.document,i=t.conversion,a=t.plugins.get(c["b"]),r=t.plugins.get("ImageUtils"),o=s(t.config.get("image.upload.types")),l=new P(t);t.commands.add("uploadImage",l),t.commands.add("imageUpload",l),i.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}),this.listenTo(t.editing.view.document,"clipboardInput",(function(e,n){if(!H(n.dataTransfer)){var i=Array.from(n.dataTransfer.files).filter((function(e){return!!e&&o.test(e.type)}));i.length&&(e.stop(),t.model.change((function(e){n.targetRanges&&e.setSelection(n.targetRanges.map((function(e){return t.editing.mapper.toModelRange(e)}))),t.model.enqueueChange("default",(function(){t.execute("uploadImage",{file:i})}))})))}})),this.listenTo(t.plugins.get("ClipboardPipeline"),"inputTransformation",(function(e,n){var i=Array.from(t.editing.view.createRangeIn(n.content)).filter((function(e){return m(r,e.item)&&!e.item.getAttribute("uploadProcessed")})).map((function(e){return{promise:d(e.item),imageElement:e.item}}));if(i.length){var o,l=new T["k"](t.editing.view.document),c=Object(b["a"])(i);try{for(c.s();!(o=c.n()).done;){var u=o.value;l.setAttribute("uploadProcessed",!0,u.imageElement);var s=a.createLoader(u.promise);s&&(l.setAttribute("src","",u.imageElement),l.setAttribute("uploadId",s.id,u.imageElement))}}catch(g){c.e(g)}finally{c.f()}}})),t.editing.view.document.on("dragover",(function(e,t){t.preventDefault()})),n.on("change",(function(){var i,r=n.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),o=new Set,l=Object(b["a"])(r);try{for(l.s();!(i=l.n()).done;){var c=i.value;if("insert"==c.type&&"$text"!=c.name){var u,s=c.position.nodeAfter,d="$graveyard"==c.position.root.rootName,m=Object(b["a"])(L(t,s));try{for(m.s();!(u=m.n()).done;){var g=u.value,f=g.getAttribute("uploadId");if(f){var h=a.loaders.get(f);h&&(d?o.has(f)||h.abort():(o.add(f),e._uploadImageElements.set(f,g),"idle"==h.status&&e._readAndUpload(h)))}}}catch(v){m.e(v)}finally{m.f()}}}}catch(v){l.e(v)}finally{l.f()}})),this.on("uploadComplete",(function(t,n){var i=n.imageElement,a=n.data,r=a.urls?a.urls:a;e.editor.model.change((function(t){t.setAttribute("src",r.default,i),e._parseAndSetSrcsetAttributeOnImage(r,i,t)}))}),{priority:"low"})}},{key:"afterInit",value:function(){var e=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this.editor.plugins.has("ImageInlineEditing")&&e.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]})}},{key:"_readAndUpload",value:function(e){var t=this,n=this.editor,i=n.model,a=n.locale.t,r=n.plugins.get(c["b"]),o=n.plugins.get(x["p"]),l=n.plugins.get("ImageUtils"),s=this._uploadImageElements;return i.enqueueChange("transparent",(function(t){t.setAttribute("uploadStatus","reading",s.get(e.id))})),e.read().then((function(){var t=e.upload(),a=s.get(e.id);if(u["i"].isSafari){var r=n.editing.mapper.toViewElement(a),o=l.findViewImgElement(r);n.editing.view.once("render",(function(){if(o.parent){var e=n.editing.view.domConverter.mapViewToDom(o.parent);if(e){var t=e.style.display;e.style.display="none",e._ckHack=e.offsetHeight,e.style.display=t}}}))}return i.enqueueChange("transparent",(function(e){e.setAttribute("uploadStatus","uploading",a)})),t})).then((function(n){i.enqueueChange("transparent",(function(i){var a=s.get(e.id);i.setAttribute("uploadStatus","complete",a),t.fire("uploadComplete",{data:n,imageElement:a})})),d()})).catch((function(t){if("error"!==e.status&&"aborted"!==e.status)throw t;"error"==e.status&&t&&o.showWarning(t,{title:a("Upload failed"),namespace:"upload"}),i.enqueueChange("transparent",(function(t){t.remove(s.get(e.id))})),d()}));function d(){i.enqueueChange("transparent",(function(t){var n=s.get(e.id);t.removeAttribute("uploadId",n),t.removeAttribute("uploadStatus",n),s.delete(e.id)})),r.destroyLoader(e)}}},{key:"_parseAndSetSrcsetAttributeOnImage",value:function(e,t,n){var i=0,a=Object.keys(e).filter((function(e){var t=parseInt(e,10);if(!isNaN(t))return i=Math.max(i,t),!0})).map((function(t){return"".concat(e[t]," ").concat(t,"w")})).join(", ");""!=a&&n.setAttribute("srcset",{data:a,width:i},t)}}],[{key:"requires",get:function(){return[c["b"],x["p"],z["b"],V["a"]]}},{key:"pluginName",get:function(){return"ImageUploadEditing"}}]),n}(l["g"]);function H(e){return Array.from(e.types).includes("text/html")&&""!==e.getData("text/html")}function L(e,t){var n=e.plugins.get("ImageUtils");return Array.from(e.model.createRangeOn(t)).filter((function(e){return n.isImage(e.item)})).map((function(e){return e.item}))}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */var D=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,null,[{key:"pluginName",get:function(){return"ImageUpload"}},{key:"requires",get:function(){return[R,v,p]}}]),n}(l["g"])},"7e0c":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),l=n("a242"),c=n("5595"),u=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,[{key:"refresh",value:function(){var e=this.editor.model,t=e.schema,n=e.document.selection;this.isEnabled=s(n,t,e)}},{key:"execute",value:function(){var e=this.editor.model;e.change((function(t){var n=t.createElement("horizontalLine");e.insertContent(n);var i=n.nextSibling,a=i&&e.schema.checkChild(i,"$text");!a&&e.schema.checkChild(n.parent,"paragraph")&&(i=t.createElement("paragraph"),e.insertContent(i,t.createPositionAfter(n))),i&&t.setSelection(i,0)}))}}]),n}(l["a"]);function s(e,t,n){var i=d(e,n);return t.checkChild(i,"horizontalLine")}function d(e,t){var n=Object(c["d"])(e,t),i=n.start.parent;return i.isEmpty&&!i.is("element","$root")?i.parent:i}n("f613");
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */var m=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,[{key:"init",value:function(){var e=this.editor,t=e.model.schema,n=e.t,i=e.conversion;t.register("horizontalLine",{isObject:!0,allowWhere:"$block"}),i.for("dataDowncast").elementToElement({model:"horizontalLine",view:function(e,t){var n=t.writer;return n.createEmptyElement("hr")}}),i.for("editingDowncast").elementToElement({model:"horizontalLine",view:function(e,t){var i=t.writer,a=n("Horizontal line"),r=i.createContainerElement("div"),o=i.createEmptyElement("hr");return i.addClass("ck-horizontal-line",r),i.setCustomProperty("hr",!0,r),i.insert(i.createPositionAt(r,0),o),g(r,i,a)}}),i.for("upcast").elementToElement({view:"hr",model:"horizontalLine"}),e.commands.add("horizontalLine",new u(e))}}],[{key:"pluginName",get:function(){return"HorizontalLineEditing"}}]),n}(l["g"]);function g(e,t,n){return t.setCustomProperty("horizontalLine",!0,e),Object(c["f"])(e,t,{label:n})}var f=n("02d4"),h=n("6f6d"),v=n.n(h),b=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.t;t.ui.componentFactory.add("horizontalLine",(function(i){var a=t.commands.get("horizontalLine"),r=new f["c"](i);return r.set({label:n("Horizontal line"),icon:v.a,tooltip:!0}),r.bind("isEnabled").to(a,"isEnabled"),e.listenTo(r,"execute",(function(){t.execute("horizontalLine"),t.editing.view.focus()})),r}))}}],[{key:"pluginName",get:function(){return"HorizontalLineUI"}}]),n}(l["g"]),p=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,null,[{key:"requires",get:function(){return[m,b,c["a"]]}},{key:"pluginName",get:function(){return"HorizontalLine"}}]),n}(l["g"])},8030:function(e,t,n){},"8b25":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),l=n("a242"),c=n("b85c"),u=(n("d3b7"),n("886fd")),s=n("4fdd"),d=(n("caad"),n("2532"),n("b0c0"),n("4de4"),n("a630"),n("3ca3"),function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e,a){var r;return Object(i["a"])(this,n),r=t.call(this,e),r.modelElements=a,r}return Object(a["a"])(n,[{key:"refresh",value:function(){var e=this,t=Object(s["j"])(this.editor.model.document.selection.getSelectedBlocks());this.value=!!t&&this.modelElements.includes(t.name)&&t.name,this.isEnabled=!!t&&this.modelElements.some((function(n){return m(t,n,e.editor.model.schema)}))}},{key:"execute",value:function(e){var t=this.editor.model,n=t.document,i=e.value;t.change((function(e){var a,r=Array.from(n.selection.getSelectedBlocks()).filter((function(e){return m(e,i,t.schema)})),o=Object(c["a"])(r);try{for(o.s();!(a=o.n()).done;){var l=a.value;l.is("element",i)||e.rename(l,i)}}catch(u){o.e(u)}finally{o.f()}}))}}]),n}(l["a"]));function m(e,t,n){return n.checkChild(e.parent,t)&&!n.isObject(e)}
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */var g="paragraph",f=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,e),e.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]}),a}return Object(a["a"])(n,[{key:"init",value:function(){var e,t=this.editor,n=t.config.get("heading.options"),i=[],a=Object(c["a"])(n);try{for(a.s();!(e=a.n()).done;){var r=e.value;r.model!==g&&(t.model.schema.register(r.model,{inheritAllFrom:"$block"}),t.conversion.elementToElement(r),i.push(r.model))}}catch(o){a.e(o)}finally{a.f()}this._addDefaultH1Conversion(t),t.commands.add("heading",new d(t,i))}},{key:"afterInit",value:function(){var e=this.editor,t=e.commands.get("enter"),n=e.config.get("heading.options");t&&this.listenTo(t,"afterExecute",(function(t,i){var a=e.model.document.selection.getFirstPosition().parent,r=n.some((function(e){return a.is("element",e.model)}));r&&!a.is("element",g)&&0===a.childCount&&i.writer.rename(a,g)}))}},{key:"_addDefaultH1Conversion",value:function(e){e.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:s["s"].get("low")+1})}}],[{key:"pluginName",get:function(){return"HeadingEditing"}},{key:"requires",get:function(){return[u["a"]]}}]),n}(l["g"]),h=n("02d4");n("d81d");
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
function v(e){var t=e.t,n={Paragraph:t("Paragraph"),"Heading 1":t("Heading 1"),"Heading 2":t("Heading 2"),"Heading 3":t("Heading 3"),"Heading 4":t("Heading 4"),"Heading 5":t("Heading 5"),"Heading 6":t("Heading 6")};return e.config.get("heading.options").map((function(e){var t=n[e.title];return t&&t!=e.title&&(e.title=t),e}))}n("8b56");
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */var b=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.t,i=v(t),a=n("Choose heading"),r=n("Heading");t.ui.componentFactory.add("heading",(function(n){var o,l={},u=new s["b"],d=t.commands.get("heading"),m=t.commands.get("paragraph"),g=[d],f=Object(c["a"])(i);try{var v=function(){var e=o.value,t={type:"button",model:new h["o"]({label:e.title,class:e.class,withText:!0})};"paragraph"===e.model?(t.model.bind("isOn").to(m,"value"),t.model.set("commandName","paragraph"),g.push(m)):(t.model.bind("isOn").to(d,"value",(function(t){return t===e.model})),t.model.set({commandName:"heading",commandValue:e.model})),u.add(t),l[e.model]=e.title};for(f.s();!(o=f.n()).done;)v()}catch(p){f.e(p)}finally{f.f()}var b=Object(h["B"])(n);return Object(h["y"])(b,u),b.buttonView.set({isOn:!1,withText:!0,tooltip:r}),b.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),b.bind("isEnabled").toMany(g,"isEnabled",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some((function(e){return e}))})),b.buttonView.bind("label").to(d,"value",m,"value",(function(e,t){var n=e||t&&"paragraph";return l[n]?l[n]:a})),e.listenTo(b,"execute",(function(e){t.execute(e.source.commandName,e.source.commandValue?{value:e.source.commandValue}:void 0),t.editing.view.focus()})),b}))}}],[{key:"pluginName",get:function(){return"HeadingUI"}}]),n}(l["g"]),p=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,null,[{key:"requires",get:function(){return[f,b]}},{key:"pluginName",get:function(){return"Heading"}}]),n}(l["g"])},"8b56":function(e,t,n){},"92bd":function(e,t,n){},a20b:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n("5530"),a=n("b85c"),r=n("d4ec"),o=n("bee2"),l=n("262e"),c=n("2caf"),u=(n("4d63"),n("c607"),n("ac1f"),n("2c3e"),n("25f0"),n("c1f9"),n("498a2"),n("466d"),n("a242")),s=n("489d"),d=n("553a"),m=n("1788"),g=n("850e"),f=n("4fdd"),h=n("6e4c"),v=new RegExp(String(/^(http(s)?:\/\/)?[\w-]+\.[\w.~:/[\]@!$&'()*+,;=%-]+/.source+/\.(jpg|jpeg|png|gif|ico|webp|JPG|JPEG|PNG|GIF|ICO|WEBP)/.source+/(\?[\w.~:/[\]@!$&'()*+,;=%-]*)?/.source+/(#[\w.~:/[\]@!$&'()*+,;=%-]*)?$/.source)),b=function(e){Object(l["a"])(n,e);var t=Object(c["a"])(n);function n(e){var i;return Object(r["a"])(this,n),i=t.call(this,e),i._timeoutId=null,i._positionToInsert=null,i}return Object(o["a"])(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.model.document;this.listenTo(t.plugins.get("ClipboardPipeline"),"inputTransformation",(function(){var t=n.selection.getFirstRange(),i=d["e"].fromPosition(t.start);i.stickiness="toPrevious";var a=d["e"].fromPosition(t.end);a.stickiness="toNext",n.once("change:data",(function(){e._embedImageBetweenPositions(i,a),i.detach(),a.detach()}),{priority:"high"})})),t.commands.get("undo").on("execute",(function(){e._timeoutId&&(f["n"].window.clearTimeout(e._timeoutId),e._positionToInsert.detach(),e._timeoutId=null,e._positionToInsert=null)}),{priority:"high"})}},{key:"_embedImageBetweenPositions",value:function(e,t){var n,r=this,o=this.editor,l=new d["f"](e,t),c=l.getWalker({ignoreElementEnd:!0}),u=Object.fromEntries(o.model.document.selection.getAttributes()),s=this.editor.plugins.get("ImageUtils"),m="",g=Object(a["a"])(c);try{for(g.s();!(n=g.n()).done;){var h=n.value;h.item.is("$textProxy")&&(m+=h.item.data)}}catch(b){g.e(b)}finally{g.f()}m=m.trim(),m.match(v)?(this._positionToInsert=d["e"].fromPosition(e),this._timeoutId=f["n"].window.setTimeout((function(){var e=o.commands.get("insertImage");e.isEnabled?(o.model.change((function(e){var t;r._timeoutId=null,e.remove(l),l.detach(),"$graveyard"!==r._positionToInsert.root.rootName&&(t=r._positionToInsert.toPosition()),s.insertImage(Object(i["a"])(Object(i["a"])({},u),{},{src:m}),t),r._positionToInsert.detach(),r._positionToInsert=null})),o.plugins.get("Delete").requestUndoOnBackspace()):l.detach()}),100)):l.detach()}}],[{key:"requires",get:function(){return[s["a"],h["a"],m["a"],g["a"]]}},{key:"pluginName",get:function(){return"AutoImage"}}]),n}(u["g"])},a6f1:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("b85c"),a=n("d4ec"),r=n("bee2"),o=n("262e"),l=n("2caf"),c=(n("c1f9"),n("4de4"),n("d3b7"),n("a630"),n("3ca3"),n("a242")),u=function(e){Object(o["a"])(n,e);var t=Object(l["a"])(n);function n(e,i){var r;return Object(a["a"])(this,n),r=t.call(this,e),r._modelElementName=i,r}return Object(r["a"])(n,[{key:"refresh",value:function(){var e=this.editor,t=e.plugins.get("ImageUtils"),n=t.getClosestSelectedImageElement(this.editor.model.document.selection);"imageBlock"===this._modelElementName?this.isEnabled=t.isInlineImage(n):this.isEnabled=t.isBlockImage(n)}},{key:"execute",value:function(){var e=this,t=this.editor,n=this.editor.model,a=t.plugins.get("ImageUtils"),r=a.getClosestSelectedImageElement(n.document.selection),o=Object.fromEntries(r.getAttributes());return o.src||o.uploadId?n.change((function(t){var l=Array.from(n.markers).filter((function(e){return e.getRange().containsItem(r)})),c=a.insertImage(o,n.createSelection(r,"on"),e._modelElementName);if(!c)return null;var u,s=t.createRangeOn(c),d=Object(i["a"])(l);try{for(d.s();!(u=d.n()).done;){var m=u.value,g=m.getRange(),f="$graveyard"!=g.root.rootName?g.getJoined(s,!0):s;t.updateMarker(m,{range:f})}}catch(h){d.e(h)}finally{d.f()}return{oldElement:r,newElement:c}})):null}}]),n}(c["a"])},ab38:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),l=n("553a"),c=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,[{key:"observe",value:function(e){var t=this;this.listenTo(e,"load",(function(e,n){var i=n.target;t.checkShouldIgnoreEventFromTarget(i)||"IMG"==i.tagName&&t._fireEvents(n)}),{useCapture:!0})}},{key:"_fireEvents",value:function(e){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",e))}}]),n}(l["i"])},b6ab:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),l=n("a242"),c=n("ab38"),u=n("5530"),s=(n("c1f9"),n("d3b7"),n("159b"),n("4fdd")),d=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;Object(i["a"])(this,n),a=t.call(this,e);var r=e.config.get("image.insert.type");return e.plugins.has("ImageBlockEditing")||"block"===r&&Object(s["p"])("image-block-plugin-required"),e.plugins.has("ImageInlineEditing")||"inline"===r&&Object(s["p"])("image-inline-plugin-required"),a}return Object(a["a"])(n,[{key:"refresh",value:function(){this.isEnabled=this.editor.plugins.get("ImageUtils").isImageAllowed()}},{key:"execute",value:function(e){var t=this,n=Object(s["t"])(e.source),i=this.editor.model.document.selection,a=this.editor.plugins.get("ImageUtils"),r=Object.fromEntries(i.getAttributes());n.forEach((function(e,n){var o=i.getSelectedElement();if("string"===typeof e&&(e={src:e}),n&&o&&a.isImage(o)){var l=t.editor.model.createPositionAfter(o);a.insertImage(Object(u["a"])(Object(u["a"])({},e),r),l)}else a.insertImage(Object(u["a"])(Object(u["a"])({},e),r))}))}}]),n}(l["a"]),m=n("6e4c"),g=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,[{key:"init",value:function(){var e=this.editor,t=e.conversion;e.editing.view.addObserver(c["a"]),t.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:{key:"srcset",value:function(e){var t={data:e.getAttribute("srcset")};return e.hasAttribute("width")&&(t.width=e.getAttribute("width")),t}}});var n=new d(e);e.commands.add("insertImage",n),e.commands.add("imageInsert",n)}}],[{key:"requires",get:function(){return[m["a"]]}},{key:"pluginName",get:function(){return"ImageEditing"}}]),n}(l["g"])},bcf9:function(e,t,n){},beb5:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return o}));n("b0c0");var i=n("4fdd");
/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
function a(e,t){var n=e.createEmptyElement("img"),i="imageBlock"===t?e.createContainerElement("figure",{class:"image"}):e.createContainerElement("span",{class:"image-inline"},{isAllowedInsideAttributeElement:!0});return e.insert(e.createPositionAt(i,0),n),i}function r(e,t){if(e.plugins.has("ImageInlineEditing")!==e.plugins.has("ImageBlockEditing"))return{name:"img"};var n=e.plugins.get("ImageUtils");return function(e){if(!n.isInlineImageView(e))return null;var i=e.findAncestor(n.isBlockImageView)?"imageBlock":"imageInline";return i!==t?null:{name:!0}}}function o(e,t){var n=Object(i["j"])(t.getSelectedBlocks());return!n||e.isObject(n)||n.isEmpty&&"listItem"!=n.name?"imageBlock":"imageInline"}},c44c:function(e,t,n){},ce26:function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17 0a2 2 0 0 1 2 2v7a1 1 0 0 1 1 1v5a1 1 0 0 1-.883.993l-.118.006L19 17a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2l-.001-1.001-.116-.006A1 1 0 0 1 0 15v-5a1 1 0 0 1 .999-1L1 2a2 2 0 0 1 2-2h14zm.499 15.999h-15L2.5 17a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5l-.001-1.001zm-3.478-6.013-.014.014H14v.007l-1.525 1.525-1.46-1.46-.015.013V10h-1v5h1v-3.53l1.428 1.43.048.043.131-.129L14 11.421V15h1v-5h-.965l-.014-.014zM2 10H1v5h1v-2h2v2h1v-5H4v2H2v-2zm7 0H6v1h1v4h1v-4h1v-1zm8 0h-1v5h3v-1h-2v-4zm0-8.5H3a.5.5 0 0 0-.5.5l-.001 6.999h15L17.5 2a.5.5 0 0 0-.5-.5zM10 7v1H4V7h6zm3-2v1H4V5h9zm-3-2v1H4V3h6z"/></svg>'},d043:function(e,t,n){},f613:function(e,t,n){},f6a7:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),l=(n("a630"),n("3ca3"),n("d3b7"),n("d81d"),n("a242")),c=n("489d"),u=n("553a"),s=n("3523"),d=n("b6ab"),m=n("a6f1"),g=n("6e4c"),f=n("beb5"),h=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,[{key:"init",value:function(){var e=this.editor,t=e.model.schema;t.register("imageBlock",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),e.plugins.has("ImageInlineEditing")&&(e.commands.add("imageTypeBlock",new m["a"](this.editor,"imageBlock")),this._setupClipboardIntegration())}},{key:"_setupConversion",value:function(){var e=this.editor,t=e.t,n=e.conversion,i=e.plugins.get("ImageUtils");n.for("dataDowncast").elementToElement({model:"imageBlock",view:function(e,t){var n=t.writer;return Object(f["a"])(n,"imageBlock")}}),n.for("editingDowncast").elementToElement({model:"imageBlock",view:function(e,n){var a=n.writer;return i.toImageWidget(Object(f["a"])(a,"imageBlock"),a,t("image widget"))}}),n.for("downcast").add(Object(s["a"])(i,"imageBlock","src")).add(Object(s["a"])(i,"imageBlock","alt")).add(Object(s["b"])(i,"imageBlock")),n.for("upcast").elementToElement({view:Object(f["c"])(e,"imageBlock"),model:function(e,t){var n=t.writer;return n.createElement("imageBlock",e.hasAttribute("src")?{src:e.getAttribute("src")}:null)}}).add(Object(s["c"])(i))}},{key:"_setupClipboardIntegration",value:function(){var e=this.editor,t=e.model,n=e.editing.view,i=e.plugins.get("ImageUtils");this.listenTo(e.plugins.get("ClipboardPipeline"),"inputTransformation",(function(a,r){var o,l=Array.from(r.content.getChildren());if(l.every(i.isInlineImageView)){o=r.targetRanges?e.editing.mapper.toModelRange(r.targetRanges[0]):t.document.selection.getFirstRange();var c=t.createSelection(o);if("imageBlock"===Object(f["b"])(t.schema,c)){var s=new u["k"](n.document),d=l.map((function(e){return s.createElement("figure",{class:"image"},e)}));r.content=s.createDocumentFragment(d)}}}))}}],[{key:"requires",get:function(){return[d["a"],g["a"],c["b"]]}},{key:"pluginName",get:function(){return"ImageBlockEditing"}}]),n}(l["g"])}}]);
//# sourceMappingURL=chunk-2d141c42.55a3c4e2.js.map