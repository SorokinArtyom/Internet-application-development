(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a3b492a8"],{"09ac":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("b85c"),r=n("d4ec"),i=n("bee2"),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";Object(r["a"])(this,e),this.operations=[],this.type=t}return Object(i["a"])(e,[{key:"baseVersion",get:function(){var e,t=Object(a["a"])(this.operations);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(null!==n.baseVersion)return n.baseVersion}}catch(r){t.e(r)}finally{t.f()}return null}},{key:"addOperation",value:function(e){return e.batch=this,this.operations.push(e),e}}]),e}()},"0f93":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n("d4ec"),r=n("bee2"),i=n("257e"),s=n("262e"),o=n("2caf"),u=n("ad6b"),c=n("da0d"),h=n("644e"),f=function(e){Object(s["a"])(n,e);var t=Object(o["a"])(n);function n(e,r){var s;return Object(a["a"])(this,n),s=t.call(this,e,r),l.call(Object(i["a"])(s)),s}return Object(r["a"])(n,[{key:"detach",value:function(){this.stopListening()}},{key:"is",value:function(e){return"liveRange"===e||"model:liveRange"===e||"range"==e||"model:range"===e}},{key:"toRange",value:function(){return new u["a"](this.start,this.end)}}],[{key:"fromRange",value:function(e){return new n(e.start,e.end)}}]),n}(u["a"]);function l(){var e=this;this.listenTo(this.root.document.model,"applyOperation",(function(t,n){var a=n[0];a.isDocumentOperation&&d.call(e,a)}),{priority:"low"})}function d(e){var t=this.getTransformedByOperation(e),n=u["a"]._createFromRanges(t),a=!n.isEqual(this),r=v(this,e),i=null;if(a){"$graveyard"==n.root.rootName&&(i="remove"==e.type?e.sourcePosition:e.deletionPosition);var s=this.toRange();this.start=n.start,this.end=n.end,this.fire("change:range",s,{deletionPosition:i})}else r&&this.fire("change:content",this.toRange(),{deletionPosition:i})}function v(e,t){switch(t.type){case"insert":return e.containsPosition(t.position);case"move":case"remove":case"reinsert":case"merge":return e.containsPosition(t.sourcePosition)||e.start.isEqual(t.sourcePosition)||e.containsPosition(t.targetPosition);case"split":return e.containsPosition(t.splitPosition)||e.containsPosition(t.insertionPosition)}return!1}Object(h["a"])(f,c["c"])},"41db":function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var a=n("b85c"),r=n("d4ec"),i=n("bee2"),s=(n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),n("b0c0"),n("4de4"),n("a630"),n("2909")),o=n("3835"),u=(n("4ec9"),n("d81d"),n("fb6a"),n("4e82"),n("a434"),n("ac1f"),n("1276"),n("38cf"),n("9cf5")),c=n("ad6b"),h=function(){function e(t){Object(r["a"])(this,e),this._markerCollection=t,this._changesInElement=new Map,this._elementSnapshots=new Map,this._changedMarkers=new Map,this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null}return Object(i["a"])(e,[{key:"isEmpty",get:function(){return 0==this._changesInElement.size&&0==this._changedMarkers.size}},{key:"refreshItem",value:function(e){if(!this._isInInsertedElement(e.parent)){this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize);var t,n=c["a"]._createOn(e),r=Object(a["a"])(this._markerCollection.getMarkersIntersectingRange(n));try{for(r.s();!(t=r.n()).done;){var i=t.value,s=i.getRange();this.bufferMarkerChange(i.name,s,s,i.affectsData)}}catch(o){r.e(o)}finally{r.f()}this._cachedChanges=null}}},{key:"bufferOperation",value:function(e){switch(e.type){case"insert":if(this._isInInsertedElement(e.position.parent))return;this._markInsert(e.position.parent,e.position.offset,e.nodes.maxOffset);break;case"addAttribute":case"removeAttribute":case"changeAttribute":var t,n=Object(a["a"])(e.range.getItems({shallow:!0}));try{for(n.s();!(t=n.n()).done;){var r=t.value;this._isInInsertedElement(r.parent)||this._markAttribute(r)}}catch(p){n.e(p)}finally{n.f()}break;case"remove":case"move":case"reinsert":if(e.sourcePosition.isEqual(e.targetPosition)||e.sourcePosition.getShiftedBy(e.howMany).isEqual(e.targetPosition))return;var i=this._isInInsertedElement(e.sourcePosition.parent),s=this._isInInsertedElement(e.targetPosition.parent);i||this._markRemove(e.sourcePosition.parent,e.sourcePosition.offset,e.howMany),s||this._markInsert(e.targetPosition.parent,e.getMovedRangeStart().offset,e.howMany);break;case"rename":if(this._isInInsertedElement(e.position.parent))return;this._markRemove(e.position.parent,e.position.offset,1),this._markInsert(e.position.parent,e.position.offset,1);var o,u=c["a"]._createFromPositionAndShift(e.position,1),h=Object(a["a"])(this._markerCollection.getMarkersIntersectingRange(u));try{for(h.s();!(o=h.n()).done;){var f=o.value,l=f.getRange();this.bufferMarkerChange(f.name,l,l,f.affectsData)}}catch(p){h.e(p)}finally{h.f()}break;case"split":var d=e.splitPosition.parent;this._isInInsertedElement(d)||this._markRemove(d,e.splitPosition.offset,e.howMany),this._isInInsertedElement(e.insertionPosition.parent)||this._markInsert(e.insertionPosition.parent,e.insertionPosition.offset,1),e.graveyardPosition&&this._markRemove(e.graveyardPosition.parent,e.graveyardPosition.offset,1);break;case"merge":var v=e.sourcePosition.parent;this._isInInsertedElement(v.parent)||this._markRemove(v.parent,v.startOffset,1);var g=e.graveyardPosition.parent;this._markInsert(g,e.graveyardPosition.offset,1);var y=e.targetPosition.parent;this._isInInsertedElement(y)||this._markInsert(y,e.targetPosition.offset,v.maxOffset);break}this._cachedChanges=null}},{key:"bufferMarkerChange",value:function(e,t,n,a){var r=this._changedMarkers.get(e);r?(r.newRange=n,r.affectsData=a,null==r.oldRange&&null==r.newRange&&this._changedMarkers.delete(e)):this._changedMarkers.set(e,{oldRange:t,newRange:n,affectsData:a})}},{key:"getMarkersToRemove",value:function(){var e,t=[],n=Object(a["a"])(this._changedMarkers);try{for(n.s();!(e=n.n()).done;){var r=Object(o["a"])(e.value,2),i=r[0],s=r[1];null!=s.oldRange&&t.push({name:i,range:s.oldRange})}}catch(u){n.e(u)}finally{n.f()}return t}},{key:"getMarkersToAdd",value:function(){var e,t=[],n=Object(a["a"])(this._changedMarkers);try{for(n.s();!(e=n.n()).done;){var r=Object(o["a"])(e.value,2),i=r[0],s=r[1];null!=s.newRange&&t.push({name:i,range:s.newRange})}}catch(u){n.e(u)}finally{n.f()}return t}},{key:"getChangedMarkers",value:function(){return Array.from(this._changedMarkers).map((function(e){return{name:e[0],data:{oldRange:e[1].oldRange,newRange:e[1].newRange}}}))}},{key:"hasDataChanges",value:function(){var e,t=Object(a["a"])(this._changedMarkers);try{for(t.s();!(e=t.n()).done;){var n=Object(o["a"])(e.value,2),r=n[1];if(r.affectsData)return!0}}catch(i){t.e(i)}finally{t.f()}return this._changesInElement.size>0}},{key:"getChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeChangesInGraveyard:!1};if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();var t,n=[],r=Object(a["a"])(this._changesInElement.keys());try{for(r.s();!(t=r.n()).done;){var i,o=t.value,h=this._changesInElement.get(o).sort((function(e,t){return e.offset===t.offset?e.type!=t.type?"remove"==e.type?-1:1:0:e.offset<t.offset?-1:1})),v=this._elementSnapshots.get(o),g=f(o.getChildren()),y=l(v.length,h),p=0,_=0,b=Object(a["a"])(y);try{for(b.s();!(i=b.n()).done;){var m=i.value;if("i"===m)n.push(this._getInsertDiff(o,p,g[p].name)),p++;else if("r"===m)n.push(this._getRemoveDiff(o,p,v[_].name)),_++;else if("a"===m){var k,O=g[p].attributes,w=v[_].attributes,R=void 0;if("$text"==g[p].name)R=new c["a"](u["a"]._createAt(o,p),u["a"]._createAt(o,p+1));else{var j=o.offsetToIndex(p);R=new c["a"](u["a"]._createAt(o,p),u["a"]._createAt(o.getChild(j),0))}(k=n).push.apply(k,Object(s["a"])(this._getAttributesDiff(R,w,O))),p++,_++}else p++,_++}}catch(D){b.e(D)}finally{b.f()}}}catch(D){r.e(D)}finally{r.f()}n.sort((function(e,t){return e.position.root!=t.position.root?e.position.root.rootName<t.position.root.rootName?-1:1:e.position.isEqual(t.position)?e.changeCount-t.changeCount:e.position.isBefore(t.position)?-1:1}));for(var C=1,M=0;C<n.length;C++){var A=n[M],P=n[C],I="remove"==A.type&&"remove"==P.type&&"$text"==A.name&&"$text"==P.name&&A.position.isEqual(P.position),x="insert"==A.type&&"insert"==P.type&&"$text"==A.name&&"$text"==P.name&&A.position.parent==P.position.parent&&A.position.offset+A.length==P.position.offset,S="attribute"==A.type&&"attribute"==P.type&&A.position.parent==P.position.parent&&A.range.isFlat&&P.range.isFlat&&A.position.offset+A.length==P.position.offset&&A.attributeKey==P.attributeKey&&A.attributeOldValue==P.attributeOldValue&&A.attributeNewValue==P.attributeNewValue;I||x||S?(A.length++,S&&(A.range.end=A.range.end.getShiftedBy(1)),n[C]=null):M=C}n=n.filter((function(e){return e}));var T,N=Object(a["a"])(n);try{for(N.s();!(T=N.n()).done;){var E=T.value;delete E.changeCount,"attribute"==E.type&&(delete E.position,delete E.length)}}catch(D){N.e(D)}finally{N.f()}return this._changeCount=0,this._cachedChangesWithGraveyard=n.slice(),this._cachedChanges=n.filter(d),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard:this._cachedChanges}},{key:"reset",value:function(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._cachedChanges=null}},{key:"_markInsert",value:function(e,t,n){var a={type:"insert",offset:t,howMany:n,count:this._changeCount++};this._markChange(e,a)}},{key:"_markRemove",value:function(e,t,n){var a={type:"remove",offset:t,howMany:n,count:this._changeCount++};this._markChange(e,a),this._removeAllNestedChanges(e,t,n)}},{key:"_markAttribute",value:function(e){var t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}},{key:"_markChange",value:function(e,t){this._makeSnapshot(e);var n=this._getChangesForElement(e);this._handleChange(t,n),n.push(t);for(var a=0;a<n.length;a++)n[a].howMany<1&&(n.splice(a,1),a--)}},{key:"_getChangesForElement",value:function(e){var t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}},{key:"_makeSnapshot",value:function(e){this._elementSnapshots.has(e)||this._elementSnapshots.set(e,f(e.getChildren()))}},{key:"_handleChange",value:function(e,t){e.nodesToHandle=e.howMany;var n,r=Object(a["a"])(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,s=e.offset+e.howMany,o=i.offset+i.howMany;if("insert"==e.type&&("insert"==i.type&&(e.offset<=i.offset?i.offset+=e.howMany:e.offset<o&&(i.howMany+=e.nodesToHandle,e.nodesToHandle=0)),"remove"==i.type&&e.offset<i.offset&&(i.offset+=e.howMany),"attribute"==i.type))if(e.offset<=i.offset)i.offset+=e.howMany;else if(e.offset<o){var u=i.howMany;i.howMany=e.offset-i.offset,t.unshift({type:"attribute",offset:s,howMany:u-i.howMany,count:this._changeCount++})}if("remove"==e.type){if("insert"==i.type)if(s<=i.offset)i.offset-=e.howMany;else if(s<=o)if(e.offset<i.offset){var c=s-i.offset;i.offset=e.offset,i.howMany-=c,e.nodesToHandle-=c}else i.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=i.offset)e.nodesToHandle-=i.howMany,i.howMany=0;else if(e.offset<o){var h=o-e.offset;i.howMany-=h,e.nodesToHandle-=h}if("remove"==i.type&&(s<=i.offset?i.offset-=e.howMany:e.offset<i.offset&&(e.nodesToHandle+=i.howMany,i.howMany=0)),"attribute"==i.type)if(s<=i.offset)i.offset-=e.howMany;else if(e.offset<i.offset){var f=s-i.offset;i.offset=e.offset,i.howMany-=f}else if(e.offset<o)if(s<=o){var l=i.howMany;i.howMany=e.offset-i.offset;var d=l-i.howMany-e.nodesToHandle;t.unshift({type:"attribute",offset:e.offset,howMany:d,count:this._changeCount++})}else i.howMany-=o-e.offset}if("attribute"==e.type){if("insert"==i.type)if(e.offset<i.offset&&s>i.offset){if(s>o){var v={type:"attribute",offset:o,howMany:s-o,count:this._changeCount++};this._handleChange(v,t),t.push(v)}e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=i.offset&&e.offset<o&&(s>o?(e.nodesToHandle=s-o,e.offset=o):e.nodesToHandle=0);if("remove"==i.type&&e.offset<i.offset&&s>i.offset){var g={type:"attribute",offset:i.offset,howMany:s-i.offset,count:this._changeCount++};this._handleChange(g,t),t.push(g),e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}"attribute"==i.type&&(e.offset>=i.offset&&s<=o?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=i.offset&&s>=o&&(i.howMany=0))}}}catch(y){r.e(y)}finally{r.f()}e.howMany=e.nodesToHandle,delete e.nodesToHandle}},{key:"_getInsertDiff",value:function(e,t,n){return{type:"insert",position:u["a"]._createAt(e,t),name:n,length:1,changeCount:this._changeCount++}}},{key:"_getRemoveDiff",value:function(e,t,n){return{type:"remove",position:u["a"]._createAt(e,t),name:n,length:1,changeCount:this._changeCount++}}},{key:"_getAttributesDiff",value:function(e,t,n){var r=[];n=new Map(n);var i,s=Object(a["a"])(t);try{for(s.s();!(i=s.n()).done;){var u=Object(o["a"])(i.value,2),c=u[0],h=u[1],f=n.has(c)?n.get(c):null;f!==h&&r.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:c,attributeOldValue:h,attributeNewValue:f,changeCount:this._changeCount++}),n.delete(c)}}catch(p){s.e(p)}finally{s.f()}var l,d=Object(a["a"])(n);try{for(d.s();!(l=d.n()).done;){var v=Object(o["a"])(l.value,2),g=v[0],y=v[1];r.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:g,attributeOldValue:null,attributeNewValue:y,changeCount:this._changeCount++})}}catch(p){d.e(p)}finally{d.f()}return r}},{key:"_isInInsertedElement",value:function(e){var t=e.parent;if(!t)return!1;var n=this._changesInElement.get(t),r=e.startOffset;if(n){var i,s=Object(a["a"])(n);try{for(s.s();!(i=s.n()).done;){var o=i.value;if("insert"==o.type&&r>=o.offset&&r<o.offset+o.howMany)return!0}}catch(u){s.e(u)}finally{s.f()}}return this._isInInsertedElement(t)}},{key:"_removeAllNestedChanges",value:function(e,t,n){var r,i=new c["a"](u["a"]._createAt(e,t),u["a"]._createAt(e,t+n)),s=Object(a["a"])(i.getItems({shallow:!0}));try{for(s.s();!(r=s.n()).done;){var o=r.value;o.is("element")&&(this._elementSnapshots.delete(o),this._changesInElement.delete(o),this._removeAllNestedChanges(o,0,o.maxOffset))}}catch(h){s.e(h)}finally{s.f()}}}]),e}();function f(e){var t,n=[],r=Object(a["a"])(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i.is("$text"))for(var s=0;s<i.data.length;s++)n.push({name:"$text",attributes:new Map(i.getAttributes())});else n.push({name:i.name,attributes:new Map(i.getAttributes())})}}catch(o){r.e(o)}finally{r.f()}return n}function l(e,t){var n,r=[],i=0,o=0,u=Object(a["a"])(t);try{for(u.s();!(n=u.n()).done;){var c=n.value;if(c.offset>i){for(var h=0;h<c.offset-i;h++)r.push("e");o+=c.offset-i}if("insert"==c.type){for(var f=0;f<c.howMany;f++)r.push("i");i=c.offset+c.howMany}else if("remove"==c.type){for(var l=0;l<c.howMany;l++)r.push("r");i=c.offset,o+=c.howMany}else r.push.apply(r,Object(s["a"])("a".repeat(c.howMany).split(""))),i=c.offset+c.howMany,o+=c.howMany}}catch(v){u.e(v)}finally{u.f()}if(o<e)for(var d=0;d<e-o-i;d++)r.push("e");return r}function d(e){var t=e.position&&"$graveyard"==e.position.root.rootName,n=e.range&&"$graveyard"==e.range.root.rootName;return!t&&!n}var v=n("6576"),g=(n("caad"),n("2532"),n("a9e3"),function(){function e(){Object(r["a"])(this,e),this._operations=[],this._undoPairs=new Map,this._undoneOperations=new Set}return Object(i["a"])(e,[{key:"addOperation",value:function(e){this._operations.includes(e)||this._operations.push(e)}},{key:"getOperations",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.NEGATIVE_INFINITY,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,r=[],i=Object(a["a"])(this._operations);try{for(i.s();!(e=i.n()).done;){var s=e.value;s.baseVersion>=t&&s.baseVersion<n&&r.push(s)}}catch(o){i.e(o)}finally{i.f()}return r}},{key:"getOperation",value:function(e){var t,n=Object(a["a"])(this._operations);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.baseVersion==e)return r}}catch(i){n.e(i)}finally{n.f()}}},{key:"setOperationAsUndone",value:function(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e)}},{key:"isUndoingOperation",value:function(e){return this._undoPairs.has(e)}},{key:"isUndoneOperation",value:function(e){return this._undoneOperations.has(e)}},{key:"getUndoneOperation",value:function(e){return this._undoPairs.get(e)}}]),e}()),y=n("c494"),p=n("67b9"),_=n("da0d"),b=n("f2ea"),m=n("644e"),k=n("6ce9"),O=n("758b"),w="$graveyard",R=function(){function e(t){var n=this;Object(r["a"])(this,e),this.model=t,this.version=0,this.history=new g(this),this.selection=new y["a"](this),this.roots=new p["a"]({idProperty:"rootName"}),this.differ=new h(t.markers),this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",w),this.listenTo(t,"applyOperation",(function(e,t){var a=t[0];if(a.isDocumentOperation&&a.baseVersion!==n.version)throw new b["a"]("model-document-applyoperation-wrong-version",n,{operation:a})}),{priority:"highest"}),this.listenTo(t,"applyOperation",(function(e,t){var a=t[0];a.isDocumentOperation&&n.differ.bufferOperation(a)}),{priority:"high"}),this.listenTo(t,"applyOperation",(function(e,t){var a=t[0];a.isDocumentOperation&&(n.version++,n.history.addOperation(a))}),{priority:"low"}),this.listenTo(this.selection,"change",(function(){n._hasSelectionChangedFromTheLastChangeBlock=!0})),this.listenTo(t.markers,"update",(function(e,t,a,r){n.differ.bufferMarkerChange(t.name,a,r,t.affectsData),null===a&&t.on("change",(function(e,a){n.differ.bufferMarkerChange(t.name,a,t.getRange(),t.affectsData)}))}))}return Object(i["a"])(e,[{key:"graveyard",get:function(){return this.getRoot(w)}},{key:"createRoot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"$root",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main";if(this.roots.get(t))throw new b["a"]("model-document-createroot-name-exists",this,{name:t});var n=new v["a"](this,e,t);return this.roots.add(n),n}},{key:"destroy",value:function(){this.selection.destroy(),this.stopListening()}},{key:"getRoot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this.roots.get(e)}},{key:"getRootNames",value:function(){return Array.from(this.roots,(function(e){return e.rootName})).filter((function(e){return e!=w}))}},{key:"registerPostFixer",value:function(e){this._postFixers.add(e)}},{key:"toJSON",value:function(){var e=Object(O["a"])(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}},{key:"_handleChangeBlock",value:function(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}},{key:"_hasDocumentChangedFromTheLastChangeBlock",value:function(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}},{key:"_getDefaultRoot",value:function(){var e,t=Object(a["a"])(this.roots);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n!==this.graveyard)return n}}catch(r){t.e(r)}finally{t.f()}return this.graveyard}},{key:"_getDefaultRange",value:function(){var e=this._getDefaultRoot(),t=this.model,n=t.schema,a=t.createPositionFromPath(e,[0]),r=n.getNearestSelectionRange(a);return r||t.createRange(a)}},{key:"_validateSelectionRange",value:function(e){return j(e.start)&&j(e.end)}},{key:"_callPostFixers",value:function(e){var t=!1;do{var n,r=Object(a["a"])(this._postFixers);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(this.selection.refresh(),t=i(e),t)break}}catch(s){r.e(s)}finally{r.f()}}while(t)}}]),e}();function j(e){var t=e.textNode;if(t){var n=t.data,a=e.offset-t.startOffset;return!Object(k["b"])(n,a)&&!Object(k["a"])(n,a)}return!0}Object(m["a"])(R,_["c"])},4343:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n("b85c"),r=n("d4ec"),i=n("bee2"),s=(n("96cf"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("b0c0"),n("caad"),n("2532"),n("2ca0"),n("d28b"),n("a4d3"),n("e01a"),n("0f93")),o=n("da0d"),u=n("f2ea"),c=n("644e"),h=function(e){function t(){Object(r["a"])(this,t),this._markers=new Map}return Object(i["a"])(t,[{key:e,value:function(){return this._markers.values()}},{key:"has",value:function(e){var t=e instanceof f?e.name:e;return this._markers.has(t)}},{key:"get",value:function(e){return this._markers.get(e)||null}},{key:"_set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=e instanceof f?e.name:e;if(r.includes(","))throw new u["a"]("markercollection-incorrect-marker-name",this);var i=this._markers.get(r);if(i){var o=i.getRange(),c=!1;return o.isEqual(t)||(i._attachLiveRange(s["a"].fromRange(t)),c=!0),n!=i.managedUsingOperations&&(i._managedUsingOperations=n,c=!0),"boolean"===typeof a&&a!=i.affectsData&&(i._affectsData=a,c=!0),c&&this.fire("update:"+r,i,o,t),i}var h=s["a"].fromRange(t),l=new f(r,h,n,a);return this._markers.set(r,l),this.fire("update:"+r,l,null,t),l}},{key:"_remove",value:function(e){var t=e instanceof f?e.name:e,n=this._markers.get(t);return!!n&&(this._markers.delete(t),this.fire("update:"+t,n,n.getRange(),null),this._destroyMarker(n),!0)}},{key:"_refresh",value:function(e){var t=e instanceof f?e.name:e,n=this._markers.get(t);if(!n)throw new u["a"]("markercollection-refresh-marker-not-exists",this);var a=n.getRange();this.fire("update:"+t,n,a,a,n.managedUsingOperations,n.affectsData)}},{key:"getMarkersAtPosition",value:regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Object(a["a"])(this),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=10;break}if(i=r.value,!i.getRange().containsPosition(t)){e.next=8;break}return e.next=8,i;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](1),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[1,12,15,18]])}))},{key:"getMarkersIntersectingRange",value:regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Object(a["a"])(this),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=10;break}if(i=r.value,null===i.getRange().getIntersection(t)){e.next=8;break}return e.next=8,i;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](1),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[1,12,15,18]])}))},{key:"destroy",value:function(){var e,t=Object(a["a"])(this._markers.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;this._destroyMarker(n)}}catch(r){t.e(r)}finally{t.f()}this._markers=null,this.stopListening()}},{key:"getMarkersGroup",value:regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Object(a["a"])(this._markers.values()),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=10;break}if(i=r.value,!i.name.startsWith(t+":")){e.next=8;break}return e.next=8,i;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](1),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[1,12,15,18]])}))},{key:"_destroyMarker",value:function(e){e.stopListening(),e._detachLiveRange()}}]),t}(Symbol.iterator);Object(c["a"])(h,o["c"]);var f=function(){function e(t,n,a,i){Object(r["a"])(this,e),this.name=t,this._liveRange=this._attachLiveRange(n),this._managedUsingOperations=a,this._affectsData=i}return Object(i["a"])(e,[{key:"managedUsingOperations",get:function(){if(!this._liveRange)throw new u["a"]("marker-destroyed",this);return this._managedUsingOperations}},{key:"affectsData",get:function(){if(!this._liveRange)throw new u["a"]("marker-destroyed",this);return this._affectsData}},{key:"getStart",value:function(){if(!this._liveRange)throw new u["a"]("marker-destroyed",this);return this._liveRange.start.clone()}},{key:"getEnd",value:function(){if(!this._liveRange)throw new u["a"]("marker-destroyed",this);return this._liveRange.end.clone()}},{key:"getRange",value:function(){if(!this._liveRange)throw new u["a"]("marker-destroyed",this);return this._liveRange.toRange()}},{key:"is",value:function(e){return"marker"===e||"model:marker"===e}},{key:"_attachLiveRange",value:function(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}},{key:"_detachLiveRange",value:function(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}]),e}();Object(c["a"])(f,o["c"])},"96f5":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n("d4ec"),r=n("bee2"),i=n("257e"),s=n("262e"),o=n("2caf"),u=(n("fb6a"),n("9cf5")),c=n("da0d"),h=n("644e"),f=n("f2ea"),l=function(e){Object(s["a"])(n,e);var t=Object(o["a"])(n);function n(e,r){var s,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toNone";if(Object(a["a"])(this,n),s=t.call(this,e,r,o),!s.root.is("rootElement"))throw new f["a"]("model-liveposition-root-not-rootelement",e);return d.call(Object(i["a"])(s)),s}return Object(r["a"])(n,[{key:"detach",value:function(){this.stopListening()}},{key:"is",value:function(e){return"livePosition"===e||"model:livePosition"===e||"position"==e||"model:position"===e}},{key:"toPosition",value:function(){return new u["a"](this.root,this.path.slice(),this.stickiness)}}],[{key:"fromPosition",value:function(e,t){return new this(e.root,e.path.slice(),t||e.stickiness)}}]),n}(u["a"]);function d(){var e=this;this.listenTo(this.root.document.model,"applyOperation",(function(t,n){var a=n[0];a.isDocumentOperation&&v.call(e,a)}),{priority:"low"})}function v(e){var t=this.getTransformedByOperation(e);if(!this.isEqual(t)){var n=this.toPosition();this.path=t.path,this.root=t.root,this.fire("change",n)}}Object(h["a"])(l,c["c"])},a641:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n("b85c"),r=n("d4ec"),i=n("bee2"),s=n("45eb"),o=n("7e84"),u=n("262e"),c=n("2caf"),h=(n("b0c0"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0"),n("a4d3"),n("e01a"),n("bf19"),n("d81d"),n("a630"),n("34b2")),f=n("a52e"),l=n("5122"),d=n("2363"),v=n("e907"),g=function(e){Object(u["a"])(n,e);var t=Object(c["a"])(n);function n(e,a,i){var s;return Object(r["a"])(this,n),s=t.call(this,a),s.name=e,s._children=new f["a"],i&&s._insertChild(0,i),s}return Object(i["a"])(n,[{key:"childCount",get:function(){return this._children.length}},{key:"maxOffset",get:function(){return this._children.maxOffset}},{key:"isEmpty",get:function(){return 0===this.childCount}},{key:"is",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?t===this.name&&("element"===e||"model:element"===e):"element"===e||"model:element"===e||"node"===e||"model:node"===e}},{key:"getChild",value:function(e){return this._children.getNode(e)}},{key:"getChildren",value:function(){return this._children[Symbol.iterator]()}},{key:"getChildIndex",value:function(e){return this._children.getNodeIndex(e)}},{key:"getChildStartOffset",value:function(e){return this._children.getNodeStartOffset(e)}},{key:"offsetToIndex",value:function(e){return this._children.offsetToIndex(e)}},{key:"getNodeByPath",value:function(e){var t,n=this,r=Object(a["a"])(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.getChild(n.offsetToIndex(i))}}catch(s){r.e(s)}finally{r.f()}return n}},{key:"findAncestor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeSelf:!1},n=t.includeSelf?this:this.parent;while(n){if(n.name===e)return n;n=n.parent}return null}},{key:"toJSON",value:function(){var e=Object(s["a"])(Object(o["a"])(n.prototype),"toJSON",this).call(this);if(e.name=this.name,this._children.length>0){e.children=[];var t,r=Object(a["a"])(this._children);try{for(r.s();!(t=r.n()).done;){var i=t.value;e.children.push(i.toJSON())}}catch(u){r.e(u)}finally{r.f()}}return e}},{key:"_clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?Array.from(this._children).map((function(e){return e._clone(!0)})):null;return new n(this.name,this.getAttributes(),t)}},{key:"_appendChild",value:function(e){this._insertChild(this.childCount,e)}},{key:"_insertChild",value:function(e,t){var n,r=y(t),i=Object(a["a"])(r);try{for(i.s();!(n=i.n()).done;){var s=n.value;null!==s.parent&&s._remove(),s.parent=this}}catch(o){i.e(o)}finally{i.f()}this._children._insertNodes(e,r)}},{key:"_removeChildren",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this._children._removeNodes(e,n),i=Object(a["a"])(r);try{for(i.s();!(t=i.n()).done;){var s=t.value;s.parent=null}}catch(o){i.e(o)}finally{i.f()}return r}}],[{key:"fromJSON",value:function(e){var t=null;if(e.children){t=[];var r,i=Object(a["a"])(e.children);try{for(i.s();!(r=i.n()).done;){var s=r.value;s.name?t.push(n.fromJSON(s)):t.push(l["a"].fromJSON(s))}}catch(o){i.e(o)}finally{i.f()}}return new n(e.name,e.attributes,t)}}]),n}(h["a"]);function y(e){return"string"==typeof e?[new l["a"](e)]:(Object(v["a"])(e)||(e=[e]),Array.from(e).map((function(e){return"string"==typeof e?new l["a"](e):e instanceof d["a"]?new l["a"](e.data,e.getAttributes()):e})))}},b4cd:function(e,t,n){"use strict";var a=n("232a");n.d(t,"p",(function(){return a["a"]}));n("d38d"),n("fc1c"),n("aabd"),n("1339"),n("17e1"),n("f4bc"),n("3f95"),n("8ab1"),n("c494"),n("ad6b");var r=n("0f93");n.d(t,"f",(function(){return r["a"]}));var i=n("96f5");n.d(t,"e",(function(){return i["a"]}));n("e329");var s=n("82af");n.d(t,"j",(function(){return s["a"]}));var o=n("a641");n.d(t,"d",(function(){return o["a"]}));var u=n("c3df");n.d(t,"b",(function(){return u["a"]}));n("fb19");var c=n("c69c");n.d(t,"l",(function(){return c["a"]}));var h=n("a4b7");n.d(t,"q",(function(){return h["b"]}));var f=n("edea");n.d(t,"i",(function(){return f["a"]}));var l=n("79bf");n.d(t,"a",(function(){return l["a"]}));var d=n("51d0");n.d(t,"c",(function(){return d["a"]}));var v=n("4df9");n.d(t,"h",(function(){return v["a"]}));n("bfec");var g=n("bae8");n.d(t,"k",(function(){return g["a"]}));var y=n("e755");n.d(t,"g",(function(){return y["a"]}));n("6896"),n("f617");var p=n("4038");n.d(t,"m",(function(){return p["a"]}));var _=n("ab4f");n.d(t,"n",(function(){return _["a"]}));n("3547");var b=n("12e7");n.d(t,"o",(function(){return b["a"]}));var m=n("7343");n.d(t,"r",(function(){return m["f"]})),n.d(t,"s",(function(){return m["g"]})),n.d(t,"t",(function(){return m["i"]}))},c494:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var a=n("3835"),r=n("b85c"),i=n("257e"),s=n("45eb"),o=n("7e84"),u=n("262e"),c=n("2caf"),h=n("d4ec"),f=n("bee2"),l=(n("96cf"),n("18a5"),n("2ca0"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("6062"),n("a434"),n("a630"),n("caad"),n("ac1f"),n("1276"),n("b0c0"),n("4de4"),n("644e")),d=n("da0d"),v=n("bdc57"),g=n("0f93"),y=n("5122"),p=n("2363"),_=n("b286"),b=n("67b9"),m=n("f2ea"),k=n("ed4a"),O="selection:",w=function(){function e(t){Object(h["a"])(this,e),this._selection=new R(t),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}return Object(f["a"])(e,[{key:"isCollapsed",get:function(){return this._selection.isCollapsed}},{key:"anchor",get:function(){return this._selection.anchor}},{key:"focus",get:function(){return this._selection.focus}},{key:"rangeCount",get:function(){return this._selection.rangeCount}},{key:"hasOwnRange",get:function(){return this._selection.hasOwnRange}},{key:"isBackward",get:function(){return this._selection.isBackward}},{key:"isGravityOverridden",get:function(){return this._selection.isGravityOverridden}},{key:"markers",get:function(){return this._selection.markers}},{key:"_ranges",get:function(){return this._selection._ranges}},{key:"getRanges",value:function(){return this._selection.getRanges()}},{key:"getFirstPosition",value:function(){return this._selection.getFirstPosition()}},{key:"getLastPosition",value:function(){return this._selection.getLastPosition()}},{key:"getFirstRange",value:function(){return this._selection.getFirstRange()}},{key:"getLastRange",value:function(){return this._selection.getLastRange()}},{key:"getSelectedBlocks",value:function(){return this._selection.getSelectedBlocks()}},{key:"getSelectedElement",value:function(){return this._selection.getSelectedElement()}},{key:"containsEntireContent",value:function(e){return this._selection.containsEntireContent(e)}},{key:"destroy",value:function(){this._selection.destroy()}},{key:"getAttributeKeys",value:function(){return this._selection.getAttributeKeys()}},{key:"getAttributes",value:function(){return this._selection.getAttributes()}},{key:"getAttribute",value:function(e){return this._selection.getAttribute(e)}},{key:"hasAttribute",value:function(e){return this._selection.hasAttribute(e)}},{key:"refresh",value:function(){this._selection._updateMarkers(),this._selection._updateAttributes(!1)}},{key:"observeMarkers",value:function(e){this._selection.observeMarkers(e)}},{key:"is",value:function(e){return"selection"===e||"model:selection"==e||"documentSelection"==e||"model:documentSelection"==e}},{key:"_setFocus",value:function(e,t){this._selection.setFocus(e,t)}},{key:"_setTo",value:function(e,t,n){this._selection.setTo(e,t,n)}},{key:"_setAttribute",value:function(e,t){this._selection.setAttribute(e,t)}},{key:"_removeAttribute",value:function(e){this._selection.removeAttribute(e)}},{key:"_getStoredAttributes",value:function(){return this._selection._getStoredAttributes()}},{key:"_overrideGravity",value:function(){return this._selection.overrideGravity()}},{key:"_restoreGravity",value:function(e){this._selection.restoreGravity(e)}}],[{key:"_getStoreAttributeKey",value:function(e){return O+e}},{key:"_isStoreAttributeKey",value:function(e){return e.startsWith(O)}}]),e}();Object(l["a"])(w,d["c"]);var R=function(e){Object(u["a"])(n,e);var t=Object(c["a"])(n);function n(e){var a;return Object(h["a"])(this,n),a=t.call(this),a.markers=new b["a"]({idProperty:"name"}),a._model=e.model,a._document=e,a._attributePriority=new Map,a._selectionRestorePosition=null,a._hasChangedRange=!1,a._overriddenGravityRegister=new Set,a._observedMarkers=new Set,a.listenTo(a._model,"applyOperation",(function(e,t){var n=t[0];n.isDocumentOperation&&"marker"!=n.type&&"rename"!=n.type&&"noop"!=n.type&&(0==a._ranges.length&&a._selectionRestorePosition&&a._fixGraveyardSelection(a._selectionRestorePosition),a._selectionRestorePosition=null,a._hasChangedRange&&(a._hasChangedRange=!1,a.fire("change:range",{directChange:!1})))}),{priority:"lowest"}),a.on("change:range",(function(){var e,t=Object(r["a"])(a.getRanges());try{for(t.s();!(e=t.n()).done;){var n=e.value;if(!a._document._validateSelectionRange(n))throw new m["a"]("document-selection-wrong-position",Object(i["a"])(a),{range:n})}}catch(s){t.e(s)}finally{t.f()}})),a.listenTo(a._model.markers,"update",(function(e,t,n,r){a._updateMarker(t,r)})),a.listenTo(a._document,"change",(function(e,t){C(a._model,t)})),a}return Object(f["a"])(n,[{key:"isCollapsed",get:function(){var e=this._ranges.length;return 0===e?this._document._getDefaultRange().isCollapsed:Object(s["a"])(Object(o["a"])(n.prototype),"isCollapsed",this)}},{key:"anchor",get:function(){return Object(s["a"])(Object(o["a"])(n.prototype),"anchor",this)||this._document._getDefaultRange().start}},{key:"focus",get:function(){return Object(s["a"])(Object(o["a"])(n.prototype),"focus",this)||this._document._getDefaultRange().end}},{key:"rangeCount",get:function(){return this._ranges.length?this._ranges.length:1}},{key:"hasOwnRange",get:function(){return this._ranges.length>0}},{key:"isGravityOverridden",get:function(){return!!this._overriddenGravityRegister.size}},{key:"destroy",value:function(){for(var e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}},{key:"getRanges",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this._ranges.length){e.next=4;break}return e.delegateYield(Object(s["a"])(Object(o["a"])(n.prototype),"getRanges",this).call(this),"t0",2);case 2:e.next=6;break;case 4:return e.next=6,this._document._getDefaultRange();case 6:case"end":return e.stop()}}),e,this)}))},{key:"getFirstRange",value:function(){return Object(s["a"])(Object(o["a"])(n.prototype),"getFirstRange",this).call(this)||this._document._getDefaultRange()}},{key:"getLastRange",value:function(){return Object(s["a"])(Object(o["a"])(n.prototype),"getLastRange",this).call(this)||this._document._getDefaultRange()}},{key:"setTo",value:function(e,t,a){Object(s["a"])(Object(o["a"])(n.prototype),"setTo",this).call(this,e,t,a),this._updateAttributes(!0),this._updateMarkers()}},{key:"setFocus",value:function(e,t){Object(s["a"])(Object(o["a"])(n.prototype),"setFocus",this).call(this,e,t),this._updateAttributes(!0),this._updateMarkers()}},{key:"setAttribute",value:function(e,t){if(this._setAttribute(e,t)){var n=[e];this.fire("change:attribute",{attributeKeys:n,directChange:!0})}}},{key:"removeAttribute",value:function(e){if(this._removeAttribute(e)){var t=[e];this.fire("change:attribute",{attributeKeys:t,directChange:!0})}}},{key:"overrideGravity",value:function(){var e=Object(k["a"])();return this._overriddenGravityRegister.add(e),1===this._overriddenGravityRegister.size&&this._updateAttributes(!0),e}},{key:"restoreGravity",value:function(e){if(!this._overriddenGravityRegister.has(e))throw new m["a"]("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}},{key:"observeMarkers",value:function(e){this._observedMarkers.add(e),this._updateMarkers()}},{key:"_popRange",value:function(){this._ranges.pop().detach()}},{key:"_pushRange",value:function(e){var t=this._prepareRange(e);t&&this._ranges.push(t)}},{key:"_prepareRange",value:function(e){var t=this;if(this._checkRange(e),e.root!=this._document.graveyard){var n=g["a"].fromRange(e);return n.on("change:range",(function(e,a,r){if(t._hasChangedRange=!0,n.root==t._document.graveyard){t._selectionRestorePosition=r.deletionPosition;var i=t._ranges.indexOf(n);t._ranges.splice(i,1),n.detach()}})),n}}},{key:"_updateMarkers",value:function(){if(this._observedMarkers.size){var e,t=[],n=!1,a=Object(r["a"])(this._model.markers);try{for(a.s();!(e=a.n()).done;){var i=e.value,s=i.name.split(":",1)[0];if(this._observedMarkers.has(s)){var o,u=i.getRange(),c=Object(r["a"])(this.getRanges());try{for(c.s();!(o=c.n()).done;){var h=o.value;u.containsRange(h,!h.isCollapsed)&&t.push(i)}}catch(_){c.e(_)}finally{c.f()}}}}catch(_){a.e(_)}finally{a.f()}for(var f=Array.from(this.markers),l=0,d=t;l<d.length;l++){var v=d[l];this.markers.has(v)||(this.markers.add(v),n=!0)}for(var g=0,y=Array.from(this.markers);g<y.length;g++){var p=y[g];t.includes(p)||(this.markers.remove(p),n=!0)}n&&this.fire("change:marker",{oldMarkers:f,directChange:!1})}}},{key:"_updateMarker",value:function(e,t){var n=e.name.split(":",1)[0];if(this._observedMarkers.has(n)){var a=!1,i=Array.from(this.markers),s=this.markers.has(e);if(t){var o,u=!1,c=Object(r["a"])(this.getRanges());try{for(c.s();!(o=c.n()).done;){var h=o.value;if(t.containsRange(h,!h.isCollapsed)){u=!0;break}}}catch(f){c.e(f)}finally{c.f()}u&&!s?(this.markers.add(e),a=!0):!u&&s&&(this.markers.remove(e),a=!0)}else s&&(this.markers.remove(e),a=!0);a&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}}},{key:"_updateAttributes",value:function(e){var t=Object(_["a"])(this._getSurroundingAttributes()),n=Object(_["a"])(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else{var i,s=Object(r["a"])(this._attributePriority);try{for(s.s();!(i=s.n()).done;){var o=Object(a["a"])(i.value,2),u=o[0],c=o[1];"low"==c&&(this._attrs.delete(u),this._attributePriority.delete(u))}}catch(k){s.e(k)}finally{s.f()}}this._setAttributesTo(t);var h,f=[],l=Object(r["a"])(this.getAttributes());try{for(l.s();!(h=l.n()).done;){var d=Object(a["a"])(h.value,2),v=d[0],g=d[1];n.has(v)&&n.get(v)===g||f.push(v)}}catch(k){l.e(k)}finally{l.f()}var y,p=Object(r["a"])(n);try{for(p.s();!(y=p.n()).done;){var b=Object(a["a"])(y.value,1),m=b[0];this.hasAttribute(m)||f.push(m)}}catch(k){p.e(k)}finally{p.f()}f.length>0&&this.fire("change:attribute",{attributeKeys:f,directChange:!1})}},{key:"_setAttribute",value:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=a?"normal":"low";if("low"==r&&"normal"==this._attributePriority.get(e))return!1;var i=Object(s["a"])(Object(o["a"])(n.prototype),"getAttribute",this).call(this,e);return i!==t&&(this._attrs.set(e,t),this._attributePriority.set(e,r),!0)}},{key:"_removeAttribute",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=t?"normal":"low";return("low"!=a||"normal"!=this._attributePriority.get(e))&&(this._attributePriority.set(e,a),!!Object(s["a"])(Object(o["a"])(n.prototype),"hasAttribute",this).call(this,e)&&(this._attrs.delete(e),!0))}},{key:"_setAttributesTo",value:function(e){var t,n=new Set,i=Object(r["a"])(this.getAttributes());try{for(i.s();!(t=i.n()).done;){var s=Object(a["a"])(t.value,2),o=s[0],u=s[1];e.get(o)!==u&&this._removeAttribute(o,!1)}}catch(g){i.e(g)}finally{i.f()}var c,h=Object(r["a"])(e);try{for(h.s();!(c=h.n()).done;){var f=Object(a["a"])(c.value,2),l=f[0],d=f[1],v=this._setAttribute(l,d,!1);v&&n.add(l)}}catch(g){h.e(g)}finally{h.f()}return n}},{key:"_getStoredAttributes",value:regeneratorRuntime.mark((function e(){var t,n,a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.getFirstPosition().parent,!this.isCollapsed||!t.isEmpty){e.next=21;break}n=Object(r["a"])(t.getAttributeKeys()),e.prev=3,n.s();case 5:if((a=n.n()).done){e.next=13;break}if(i=a.value,!i.startsWith(O)){e.next=11;break}return s=i.substr(O.length),e.next=11,[s,t.getAttribute(i)];case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](3),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[3,15,18,21]])}))},{key:"_getSurroundingAttributes",value:function(){var e=this.getFirstPosition(),t=this._model.schema,n=null;if(this.isCollapsed){var a=e.textNode?e.textNode:e.nodeBefore,i=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(n=j(a)),n||(n=j(i)),!this.isGravityOverridden&&!n){var s=a;while(s&&!t.isInline(s)&&!n)s=s.previousSibling,n=j(s)}if(!n){var o=i;while(o&&!t.isInline(o)&&!n)o=o.nextSibling,n=j(o)}n||(n=this._getStoredAttributes())}else{var u,c=this.getFirstRange(),h=Object(r["a"])(c);try{for(h.s();!(u=h.n()).done;){var f=u.value;if(f.item.is("element")&&t.isObject(f.item))break;if("text"==f.type){n=f.item.getAttributes();break}}}catch(l){h.e(l)}finally{h.f()}}return n}},{key:"_fixGraveyardSelection",value:function(e){var t=this._model.schema.getNearestSelectionRange(e);t&&this._pushRange(t)}}]),n}(v["a"]);function j(e){return e instanceof p["a"]||e instanceof y["a"]?e.getAttributes():null}function C(e,t){var n,a=e.document.differ,i=Object(r["a"])(a.getChanges());try{var s=function(){var a=n.value;if("insert"!=a.type)return"continue";var i=a.position.parent,s=a.length===i.maxOffset;s&&e.enqueueChange(t,(function(e){var t,n=Array.from(i.getAttributeKeys()).filter((function(e){return e.startsWith(O)})),a=Object(r["a"])(n);try{for(a.s();!(t=a.n()).done;){var s=t.value;e.removeAttribute(s,i)}}catch(o){a.e(o)}finally{a.f()}}))};for(i.s();!(n=i.n()).done;)s()}catch(o){i.e(o)}finally{i.f()}}},db03:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n("b85c"),r=n("d4ec"),i=n("bee2"),s=(n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("d28b"),n("a4d3"),n("e01a"),n("bf19"),n("b0c0"),n("d81d"),n("a630"),n("a52e")),o=n("a641"),u=n("5122"),c=n("2363"),h=n("e907"),f=function(e){function t(e){Object(r["a"])(this,t),this.markers=new Map,this._children=new s["a"],e&&this._insertChild(0,e)}return Object(i["a"])(t,[{key:e,value:function(){return this.getChildren()}},{key:"childCount",get:function(){return this._children.length}},{key:"maxOffset",get:function(){return this._children.maxOffset}},{key:"isEmpty",get:function(){return 0===this.childCount}},{key:"root",get:function(){return this}},{key:"parent",get:function(){return null}},{key:"is",value:function(e){return"documentFragment"===e||"model:documentFragment"===e}},{key:"getChild",value:function(e){return this._children.getNode(e)}},{key:"getChildren",value:function(){return this._children[Symbol.iterator]()}},{key:"getChildIndex",value:function(e){return this._children.getNodeIndex(e)}},{key:"getChildStartOffset",value:function(e){return this._children.getNodeStartOffset(e)}},{key:"getPath",value:function(){return[]}},{key:"getNodeByPath",value:function(e){var t,n=this,r=Object(a["a"])(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.getChild(n.offsetToIndex(i))}}catch(s){r.e(s)}finally{r.f()}return n}},{key:"offsetToIndex",value:function(e){return this._children.offsetToIndex(e)}},{key:"toJSON",value:function(){var e,t=[],n=Object(a["a"])(this._children);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.toJSON())}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"_appendChild",value:function(e){this._insertChild(this.childCount,e)}},{key:"_insertChild",value:function(e,t){var n,r=l(t),i=Object(a["a"])(r);try{for(i.s();!(n=i.n()).done;){var s=n.value;null!==s.parent&&s._remove(),s.parent=this}}catch(o){i.e(o)}finally{i.f()}this._children._insertNodes(e,r)}},{key:"_removeChildren",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this._children._removeNodes(e,n),i=Object(a["a"])(r);try{for(i.s();!(t=i.n()).done;){var s=t.value;s.parent=null}}catch(o){i.e(o)}finally{i.f()}return r}}],[{key:"fromJSON",value:function(e){var n,r=[],i=Object(a["a"])(e);try{for(i.s();!(n=i.n()).done;){var s=n.value;s.name?r.push(o["a"].fromJSON(s)):r.push(u["a"].fromJSON(s))}}catch(c){i.e(c)}finally{i.f()}return new t(r)}}]),t}(Symbol.iterator);function l(e){return"string"==typeof e?[new u["a"](e)]:(Object(h["a"])(e)||(e=[e]),Array.from(e).map((function(e){return"string"==typeof e?new u["a"](e):e instanceof c["a"]?new u["a"](e.data,e.getAttributes()):e})))}}}]);
//# sourceMappingURL=chunk-a3b492a8.c48e4ef4.js.map